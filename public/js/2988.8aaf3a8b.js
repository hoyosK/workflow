"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[2988],{7758:function(e,a,l){l.d(a,{Z:function(){return P}});var s=l(3396);const o=(0,s._)("strong",null,"Vue Select",-1),t=(0,s._)("small",null,"Default",-1),n=(0,s._)("option",null,"Open this select menu",-1),r=(0,s._)("option",{value:"1"},"One",-1),i=(0,s._)("option",{value:"2"},"Two",-1),d=(0,s._)("option",{value:"3"},"Three",-1),u=(0,s._)("strong",null,"Vue Select",-1),c=(0,s._)("small",null,"Sizing",-1),m=(0,s._)("p",{class:"text-medium-emphasis small"}," You may also choose from small and large custom selects to match our similarly sized text inputs. ",-1),p=(0,s._)("option",null,"Open this select menu",-1),_=(0,s._)("option",{value:"1"},"One",-1),h=(0,s._)("option",{value:"2"},"Two",-1),b=(0,s._)("option",{value:"3"},"Three",-1),g=(0,s._)("option",null,"Open this select menu",-1),f=(0,s._)("option",{value:"1"},"One",-1),v=(0,s._)("option",{value:"2"},"Two",-1),w=(0,s._)("option",{value:"3"},"Three",-1),C=(0,s._)("p",{class:"text-medium-emphasis small"},[(0,s.Uk)(" The "),(0,s._)("code",null,"multiple"),(0,s.Uk)(" attribute is also supported: ")],-1),y=(0,s._)("option",null,"Open this select menu",-1),U=(0,s._)("option",{value:"1"},"One",-1),x=(0,s._)("option",{value:"2"},"Two",-1),k=(0,s._)("option",{value:"3"},"Three",-1),V=(0,s._)("p",{class:"text-medium-emphasis small"},[(0,s.Uk)(" As is the "),(0,s._)("code",null,"html-size"),(0,s.Uk)(" property: ")],-1),W=(0,s._)("option",null,"Open this select menu",-1),D=(0,s._)("option",{value:"1"},"One",-1),T=(0,s._)("option",{value:"2"},"Two",-1),A=(0,s._)("option",{value:"3"},"Three",-1),O=(0,s._)("strong",null,"Vue Select",-1),I=(0,s._)("small",null,"Disabled",-1),Z=(0,s._)("p",{class:"text-medium-emphasis small"},[(0,s.Uk)(" Add the "),(0,s._)("code",null,"disabled"),(0,s.Uk)(" boolean attribute on a select to give it a grayed out appearance and remove pointer events. ")],-1),E=(0,s._)("option",null,"Open this select menu",-1),S=(0,s._)("option",{value:"1"},"One",-1),z=(0,s._)("option",{value:"2"},"Two",-1),F=(0,s._)("option",{value:"3"},"Three",-1);function j(e,a,l,j,H,L){const M=(0,s.up)("CCardHeader"),P=(0,s.up)("CFormSelect"),q=(0,s.up)("DocsExample"),N=(0,s.up)("CCardBody"),$=(0,s.up)("CCard"),G=(0,s.up)("CCol"),Y=(0,s.up)("CRow");return(0,s.wg)(),(0,s.j4)(Y,null,{default:(0,s.w5)((()=>[(0,s.Wm)(G,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)($,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,null,{default:(0,s.w5)((()=>[o,(0,s.Uk)(),t])),_:1}),(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.Wm)(q,{href:"forms/select.html"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{"aria-label":"Default select example"},{default:(0,s.w5)((()=>[n,r,i,d])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(G,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)($,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,null,{default:(0,s.w5)((()=>[u,(0,s.Uk)(),c])),_:1}),(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[m,(0,s.Wm)(q,{href:"forms/select.html#sizing"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{size:"lg",class:"mb-3","aria-label":"Large select example"},{default:(0,s.w5)((()=>[p,_,h,b])),_:1}),(0,s.Wm)(P,{size:"sm",class:"mb-3","aria-label":"Small select example"},{default:(0,s.w5)((()=>[g,f,v,w])),_:1})])),_:1}),C,(0,s.Wm)(q,{href:"forms/select.html#sizing"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{size:"lg",multiple:"","aria-label":"Multiple select example"},{default:(0,s.w5)((()=>[y,U,x,k])),_:1})])),_:1}),V,(0,s.Wm)(q,{href:"forms/select.html#sizing"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{size:"lg",multiple:"","aria-label":"Multiple select example"},{default:(0,s.w5)((()=>[W,D,T,A])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(G,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)($,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(M,null,{default:(0,s.w5)((()=>[O,(0,s.Uk)(),I])),_:1}),(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[Z,(0,s.Wm)(q,{href:"forms/select.html#disabled"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{"aria-label":"Disabled select example",disabled:""},{default:(0,s.w5)((()=>[E,S,z,F])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var H={name:"Select"},L=l(89);const M=(0,L.Z)(H,[["render",j]]);var P=M},2988:function(e,a,l){l.r(a),l.d(a,{default:function(){return ve}});l(7658);var s=l(3396),o=l(9242),t=l(7139);const n=(0,s._)("strong",null,"Editar usuario",-1),r={class:"row"},i={class:"col-12 col-sm-4"},d={class:"mb-3"},u=(0,s._)("label",{for:"Username",class:"form-label"},"Nombre de usuario (Inicio de sesión) *",-1),c={class:"col-12 col-sm-4"},m={class:"mb-3"},p=(0,s._)("label",{for:"correoElectronico",class:"form-label"},"Correo electrónico",-1),_={class:"col-12 col-sm-4"},h={class:"mb-3"},b=(0,s._)("label",{for:"Nombre",class:"form-label"},"Nombre",-1),g={class:"col-12 col-sm-4"},f={class:"mb-3"},v=(0,s._)("label",{for:"Nombre",class:"form-label"},"Corporativo",-1),w={class:"col-12 col-sm-4"},C={class:"mb-3"},y=(0,s._)("label",{for:"password",class:"form-label"},"Rol asignado",-1),U=["value"],x={class:"col-12 col-sm-4"},k={class:"mb-3"},V=(0,s._)("label",{for:"codigo",class:"form-label"},"Código interno",-1),W={class:"col-12"},D={class:"mb-3"},T=(0,s._)("h6",{class:"text-muted mb-3"},"Tiendas asignadas",-1),A=(0,s._)("label",{for:"password",class:"form-label"},"Selecciona las tiendas asignadas",-1),O={class:"col-12"},I={class:"mb-3"},Z=(0,s._)("h6",{class:"text-muted mb-3"},"Códigos de agente",-1),E={class:"mt-4"},S=(0,s._)("h4",null,"Variables de usuario",-1),z=(0,s._)("div",{class:"my-4 text-muted"}," Atención, las variables de usuario no podrán utilizarse en formularios de visibilidad pública ",-1),F={class:"mb-3"},j=(0,s._)("div",{class:"row fw-bold mb-3"},[(0,s._)("div",{class:"col-12 col-sm-6"}," Nombre "),(0,s._)("div",{class:"col-12 col-sm-6"}," Valor ")],-1),H={class:"row mb-3"},L={class:"col-12 col-sm-6"},M=["onUpdate:modelValue"],P={class:"col-12 col-sm-6"},q=["onUpdate:modelValue"],N={class:"col-12 text-end"},$=["onClick"],G={class:"text-end"},Y=(0,s._)("i",{class:"fas fa-plus me-2"},null,-1),K={class:"mt-4"},R=(0,s._)("h4",null,"Horario para inspecciones",-1),B=(0,s._)("div",{class:"text-muted my-4 text-center"}," Configurar un horario habilita al usuario para atender inspecciones. Los horarios se configuran en formato de 24 horas, horas:minutos ",-1),Q={class:"table table-responsive table-borderless table-hover"},J=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"col-1"},"Habilitado"),(0,s._)("th",{class:"col-1"},"Dia"),(0,s._)("th",{class:"col-2"},"Inicio"),(0,s._)("th",{class:"col-2"},"Fin"),(0,s._)("th",{class:"col-1"},"Descanso"),(0,s._)("th",{class:"col-2"},"Inicio"),(0,s._)("th",{class:"col-2"},"Fin")])],-1),X={class:"text-center"},ee=["onUpdate:modelValue"],ae=["onUpdate:modelValue"],le=["onUpdate:modelValue"],se={class:"text-center"},oe=["id","checked","onUpdate:modelValue"],te=(0,s._)("div",{class:"toggle-switch"},null,-1),ne={key:0},re=["onUpdate:modelValue"],ie={key:0},de=["onUpdate:modelValue"],ue={class:"mt-4 text-end"};function ce(e,a,l,ce,me,pe){const _e=(0,s.up)("CCardHeader"),he=(0,s.up)("multiselect"),be=(0,s.up)("vue3-tags-input"),ge=(0,s.up)("CCardBody"),fe=(0,s.up)("CCard"),ve=(0,s.up)("CCol"),we=(0,s.up)("CRow"),Ce=(0,s.Q2)("maska");return(0,s.wg)(),(0,s.j4)(we,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ve,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)(fe,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(_e,null,{default:(0,s.w5)((()=>[n])),_:1}),(0,s.Wm)(ge,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",i,[(0,s._)("div",d,[u,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"Username",placeholder:"Escribe aquí","onUpdate:modelValue":a[0]||(a[0]=e=>me.user.nombreUsuario=e),disabled:""},null,512),[[o.nr,me.user.nombreUsuario]])])]),(0,s._)("div",c,[(0,s._)("div",m,[p,(0,s.wy)((0,s._)("input",{type:"email",class:"form-control",id:"correoElectronico",placeholder:"name@ejemplo.com","onUpdate:modelValue":a[1]||(a[1]=e=>me.user.correoElectronico=e)},null,512),[[o.nr,me.user.correoElectronico]])])]),(0,s._)("div",_,[(0,s._)("div",h,[b,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"Nombre",placeholder:"Escribe aquí","onUpdate:modelValue":a[2]||(a[2]=e=>me.user.nombre=e)},null,512),[[o.nr,me.user.nombre]])])]),(0,s._)("div",g,[(0,s._)("div",f,[v,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"Corporativo",placeholder:"Escribe aquí","onUpdate:modelValue":a[3]||(a[3]=e=>me.user.corporativo=e)},null,512),[[o.nr,me.user.corporativo]])])]),(0,s._)("div",w,[(0,s._)("div",C,[y,(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a[4]||(a[4]=e=>me.user.rolUsuario=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(me.roleList,(e=>((0,s.wg)(),(0,s.iD)("option",{value:e.id},(0,t.zw)(e.name),9,U)))),256))],512),[[o.bM,me.user.rolUsuario]])])]),(0,s._)("div",x,[(0,s._)("div",k,[V,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"Codigo",placeholder:"Código interno","onUpdate:modelValue":a[5]||(a[5]=e=>me.user.codigoInterno=e)},null,512),[[o.nr,me.user.codigoInterno]])])]),(0,s._)("div",W,[(0,s._)("div",D,[T,A,(0,s.Wm)(he,{modelValue:me.tiendas,"onUpdate:modelValue":a[6]||(a[6]=e=>me.tiendas=e),options:me.tiendasOptions,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),(0,s._)("div",O,[(0,s._)("div",I,[Z,(0,s.Wm)(be,{tags:me.codigosAgente,placeholder:"Ingresa los códigos de agente",class:"form-control",onOnTagsChanged:pe.addTag},null,8,["tags","onOnTagsChanged"])])])]),(0,s._)("div",E,[S,z,(0,s._)("div",null,[(0,s._)("div",F,[j,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(me.variables,((e,a)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",H,[(0,s._)("div",L,[(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":a=>e.nombre=a},null,8,M),[[o.nr,e.nombre]])]),(0,s._)("div",P,[(0,s.wy)((0,s._)("input",{class:"form-control","onUpdate:modelValue":a=>e.valor=a},null,8,q),[[o.nr,e.valor]])]),(0,s._)("div",N,[(0,s._)("a",{onClick:e=>pe.eliminarVariable(a),class:"text-danger cursor-pointer"},"Eliminar",8,$)])])])))),256)),(0,s._)("div",G,[(0,s._)("a",{onClick:a[7]||(a[7]=(...e)=>pe.agregarVariable&&pe.agregarVariable(...e)),class:"btn btn-primary btn-sm"},[Y,(0,s.Uk)(" Agregar variable")])])])])]),(0,s._)("div",K,[R,B,(0,s._)("table",Q,[J,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(me.user.h.horarios,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:"horario_0_"+e.diaSemana},[(0,s._)("td",X,[(0,s.wy)((0,s._)("input",{type:"checkbox","onUpdate:modelValue":a=>e.estado=a,"true-value":"1","false-value":"0",class:""},null,8,ee),[[o.e8,e.estado]])]),(0,s._)("td",null,(0,t.zw)(e.nombreDia),1),(0,s._)("td",null,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.horaInicio=a,name:"horaInicio","data-maska":"##:##",placeholder:"00:00"},null,8,ae),[[o.nr,e.horaInicio],[Ce]])]),(0,s._)("td",null,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.horaFin=a,name:"horaFin","data-maska":"##:##",placeholder:"00:00"},null,8,le),[[o.nr,e.horaFin],[Ce]])]),(0,s._)("td",se,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:me.user.id,checked:!!e.tieneDescanso&&1==e.estado,"onUpdate:modelValue":a=>e.tieneDescanso=a,"true-value":"1",class:"toggle-checkbox"},null,8,oe),[[o.e8,e.tieneDescanso]]),te]),(0,s._)("td",null,[1==e.tieneDescanso?((0,s.wg)(),(0,s.iD)("div",ne,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.horaDescansoInicio=a,name:"horaDescansoInicio","data-maska":"##:##",placeholder:"00:00"},null,8,re),[[o.nr,e.horaDescansoInicio],[Ce]])])):(0,s.kq)("",!0)]),(0,s._)("td",null,[1==e.tieneDescanso?((0,s.wg)(),(0,s.iD)("div",ie,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>e.horaDescansoFin=a,name:"horaDescansoFin","data-maska":"##:##",placeholder:"00:00"},null,8,de),[[o.nr,e.horaDescansoFin],[Ce]])])):(0,s.kq)("",!0)])])))),128))])])]),(0,s._)("div",null,[(0,s._)("div",ue,[(0,s._)("button",{onClick:a[8]||(a[8]=a=>e.$router.push("/usuarios/listado")),class:"btn btn-danger me-4"},"Cancelar"),(0,s._)("button",{onClick:a[9]||(a[9]=(...e)=>pe.guardar&&pe.guardar(...e)),class:"btn btn-primary"},"Guardar")])])])),_:1})])),_:1})])),_:1})])),_:1})}var me=l(4768),pe=l(7758),_e=l(7091),he=l(3453),be={name:"Tables",components:{Select:pe.Z,Multiselect:_e.Z,Vue3TagsInput:he.Z},data(){return{id:0,user:{id:0,nombre:"",nombreUsuario:"",correoElectronico:"",telefono:"",corporativo:"",password:"",rolUsuario:0,active:0,log:{},h:{},codigoInterno:""},changePassword:!1,sendCredentials:!1,sendCredentialsEmail:!1,sendCredentialsSMS:!1,sendCredentialsWhatsapp:!1,roleList:{},tiendas:[],tiendasOptions:[],has_number:!1,has_lowercase:!1,has_uppercase:!1,has_special:!1,logHeaders:[{text:"Fecha y hora",value:"date"},{text:"IP",value:"ipFrom"},{text:"Agente",value:"userAgent"}],logItems:[],appList:{},variables:[],codigosAgente:[],codigosAgenteStr:""}},mounted(){this.id="undefined"!==typeof this.$route.params.id?parseInt(this.$route.params.id):0,this.getData()},methods:{getData(){const e=this;me.Z.doAjax("GET","users/role/list",{},(function(a){e.roleList=a.data,e.id>0&&me.Z.doAjax("GET","users/tiendas/list",{},(function(a){e.tiendasOptions=[],Object.keys(a.data).map((function(l,s){e.tiendasOptions.push({value:a.data[l].id,label:a.data[l].nombre})})),e.id>0&&me.Z.doAjax("GET","users/load/user/"+e.id,{},(function(a){e.user.id=a.data.id,e.user.nombreUsuario=a.data.nombreUsuario,e.user.correoElectronico=a.data.email,e.user.nombre=a.data.name,e.user.rolUsuario=a.data.rolUsuario,e.user.telefono=a.data.telefono,e.user.corporativo=a.data.corporativo,e.user.active=a.data.active,e.user.password="",e.user.codigoInterno=a.data.codigoInterno,e.logItems=me.Z.prepareForTable(a.data.logs),e.variables=a.data.variables||[],e.changePassword=!1,e.user.h="undefined"!==typeof a.data.h[0]?a.data.h[0]:{},e.tiendas=[],Object.keys(a.data.tiendasAsig).map((function(l,s){e.tiendas.push(a.data.tiendasAsig[l])})),e.codigosAgente=[],Object.keys(a.data.codigos_agente).map((function(l,s){e.codigosAgente.push(a.data.codigos_agente[l].codigoAgente)}))}),(function(e){me.Z.alert(e.msg,"danger")}))}),(function(e){me.Z.alert(e.msg,"danger")}))}),(function(e){me.Z.alert(e.msg,"danger")}))},guardar(){const e=this,a=e.user;a.sendCredentials=this.sendCredentials,a.sendCredentialsEmail=this.sendCredentialsEmail,a.sendCredentialsSMS=this.sendCredentialsSMS,a.sendCredentialsWhatsapp=this.sendCredentialsWhatsapp,a.appList=this.appList,a.changePassword=this.changePassword,a.variables=this.variables,a.tiendas=this.tiendas,a.codigosAgente=this.codigosAgente;let l=!1;me.Z.isEmpty(this.user.nombreUsuario)&&(me.Z.alert("Debe ingresar un nombre de usuario","danger"),l=!0),!this.changePassword||this.has_number&&this.has_lowercase&&this.has_uppercase&&this.has_special||(me.Z.alert("Tu contraseña no cumple con los parámetros requeridos","danger"),l=!0),l||me.Z.doAjax("POST","users/save-user",a,(function(a){me.Z.alert(a.msg,"success"),0===e.id&&(e.id=a.data,e.$router.push("/usuarios/edit/"+a.data)),e.getData()}),(function(e){me.Z.alert(e.msg,"danger")}))},password_check:function(){this.has_number=/\d/.test(this.user.password),this.has_lowercase=/[a-z]/.test(this.user.password),this.has_uppercase=/[A-Z]/.test(this.user.password),this.has_special=/[!@#\$%\^\&*\)\(+=._-]/.test(this.user.password)},agregarVariable(){this.variables.push({nombre:"",valor:""})},eliminarVariable(e){this.variables.splice(e,1)},addTag(e){this.codigosAgente=e}}},ge=l(89);const fe=(0,ge.Z)(be,[["render",ce]]);var ve=fe}}]);
//# sourceMappingURL=2988.8aaf3a8b.js.map