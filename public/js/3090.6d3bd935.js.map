{"version":3,"file":"js/3090.6d3bd935.js","mappings":"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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js","webpack://@coreui/coreui-free-vue-admin-template/./node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"],"sourcesContent":["/*!\n * FilePondPluginFileValidateType 1.2.8\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginFileValidateType = factory()));\n})(this, function() {\n  'use strict';\n\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    // get quick reference to Type utils\n    var Type = utils.Type,\n      isString = utils.isString,\n      replaceInString = utils.replaceInString,\n      guesstimateMimeType = utils.guesstimateMimeType,\n      getExtensionFromFilename = utils.getExtensionFromFilename,\n      getFilenameFromURL = utils.getFilenameFromURL;\n\n    var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(\n      mimeType,\n      wildcard\n    ) {\n      var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n      var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n      return mimeTypeGroup === wildcardGroup;\n    };\n\n    var isValidMimeType = function isValidMimeType(\n      acceptedTypes,\n      userInputType\n    ) {\n      return acceptedTypes.some(function(acceptedType) {\n        // accepted is wildcard mime type\n        if (/\\*$/.test(acceptedType)) {\n          return mimeTypeMatchesWildCard(userInputType, acceptedType);\n        }\n\n        // is normal mime type\n        return acceptedType === userInputType;\n      });\n    };\n\n    var getItemType = function getItemType(item) {\n      // if the item is a url we guess the mime type by the extension\n      var type = '';\n      if (isString(item)) {\n        var filename = getFilenameFromURL(item);\n        var extension = getExtensionFromFilename(filename);\n        if (extension) {\n          type = guesstimateMimeType(extension);\n        }\n      } else {\n        type = item.type;\n      }\n\n      return type;\n    };\n\n    var validateFile = function validateFile(\n      item,\n      acceptedFileTypes,\n      typeDetector\n    ) {\n      // no types defined, everything is allowed \\o/\n      if (acceptedFileTypes.length === 0) {\n        return true;\n      }\n\n      // gets the item type\n      var type = getItemType(item);\n\n      // no type detector, test now\n      if (!typeDetector) {\n        return isValidMimeType(acceptedFileTypes, type);\n      }\n\n      // use type detector\n      return new Promise(function(resolve, reject) {\n        typeDetector(item, type)\n          .then(function(detectedType) {\n            if (isValidMimeType(acceptedFileTypes, detectedType)) {\n              resolve();\n            } else {\n              reject();\n            }\n          })\n          .catch(reject);\n      });\n    };\n\n    var applyMimeTypeMap = function applyMimeTypeMap(map) {\n      return function(acceptedFileType) {\n        return map[acceptedFileType] === null\n          ? false\n          : map[acceptedFileType] || acceptedFileType;\n      };\n    };\n\n    // setup attribute mapping for accept\n    addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', function(map) {\n      return Object.assign(map, {\n        accept: 'acceptedFileTypes'\n      });\n    });\n\n    // filtering if an item is allowed in hopper\n    addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n      var query = _ref2.query;\n      // if we are not doing file type validation exit\n      if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n        return true;\n      }\n\n      // we validate the file against the accepted file types\n      return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n    });\n\n    // called for each file that is loaded\n    // right before it is set to the item state\n    // should return a promise\n    addFilter('LOAD_FILE', function(file, _ref3) {\n      var query = _ref3.query;\n      return new Promise(function(resolve, reject) {\n        if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n          resolve(file);\n          return;\n        }\n\n        var acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n        // custom type detector method\n        var typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n        // if invalid, exit here\n        var validationResult = validateFile(\n          file,\n          acceptedFileTypes,\n          typeDetector\n        );\n\n        var handleRejection = function handleRejection() {\n          var acceptedFileTypesMapped = acceptedFileTypes\n            .map(\n              applyMimeTypeMap(\n                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n              )\n            )\n            .filter(function(label) {\n              return label !== false;\n            });\n\n          var acceptedFileTypesMapped_unique = acceptedFileTypesMapped.filter(\n            function(item, index) {\n              return acceptedFileTypesMapped.indexOf(item) === index;\n            }\n          );\n\n          reject({\n            status: {\n              main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n              sub: replaceInString(\n                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                {\n                  allTypes: acceptedFileTypesMapped_unique.join(', '),\n                  allButLastType: acceptedFileTypesMapped_unique\n                    .slice(0, -1)\n                    .join(', '),\n                  lastType:\n                    acceptedFileTypesMapped_unique[\n                      acceptedFileTypesMapped.length - 1\n                    ]\n                }\n              )\n            }\n          });\n        };\n\n        // has returned new filename immidiately\n        if (typeof validationResult === 'boolean') {\n          if (!validationResult) {\n            return handleRejection();\n          }\n          return resolve(file);\n        }\n\n        // is promise\n        validationResult\n          .then(function() {\n            resolve(file);\n          })\n          .catch(handleRejection);\n      });\n    });\n\n    // expose plugin\n    return {\n      // default options\n      options: {\n        // Enable or disable file type validation\n        allowFileTypeValidation: [true, Type.BOOLEAN],\n\n        // What file types to accept\n        acceptedFileTypes: [[], Type.ARRAY],\n        // - must be comma separated\n        // - mime types: image/png, image/jpeg, image/gif\n        // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n        // - wildcards: image/*\n\n        // label to show when a type is not allowed\n        labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n        // nicer label\n        fileValidateTypeLabelExpectedTypes: [\n          'Expects {allButLastType} or {lastType}',\n          Type.STRING\n        ],\n\n        // map mime types to extensions\n        fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n        // Custom function to detect type of file\n        fileValidateTypeDetectType: [null, Type.FUNCTION]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImagePreview 4.6.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImagePreview = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image and can be viewed in canvas\n  var isPreviewableImage = function isPreviewableImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol.for &&\n          Symbol.for('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol === 'function') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var vectorMultiply = function vectorMultiply(v, amount) {\n    return createVector(v.x * amount, v.y * amount);\n  };\n\n  var vectorAdd = function vectorAdd(a, b) {\n    return createVector(a.x + b.x, a.y + b.y);\n  };\n\n  var vectorNormalize = function vectorNormalize(v) {\n    var l = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (l === 0) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    return createVector(v.x / l, v.y / l);\n  };\n\n  var vectorRotate = function vectorRotate(v, radians, origin) {\n    var cos = Math.cos(radians);\n    var sin = Math.sin(radians);\n    var t = createVector(v.x - origin.x, v.y - origin.y);\n    return createVector(\n      origin.x + cos * t.x - sin * t.y,\n      origin.y + sin * t.x + cos * t.y\n    );\n  };\n\n  var createVector = function createVector() {\n    var x =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return { x: x, y: y };\n  };\n\n  var getMarkupValue = function getMarkupValue(value, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var axis = arguments.length > 3 ? arguments[3] : undefined;\n    if (typeof value === 'string') {\n      return parseFloat(value) * scalar;\n    }\n    if (typeof value === 'number') {\n      return value * (axis ? size[axis] : Math.min(size.width, size.height));\n    }\n    return;\n  };\n\n  var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n    var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n    var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n    var stroke = markup.borderColor || markup.lineColor || 'transparent';\n    var strokeWidth = getMarkupValue(\n      markup.borderWidth || markup.lineWidth,\n      size,\n      scale\n    );\n    var lineCap = markup.lineCap || 'round';\n    var lineJoin = markup.lineJoin || 'round';\n    var dashes =\n      typeof lineStyle === 'string'\n        ? ''\n        : lineStyle\n            .map(function(v) {\n              return getMarkupValue(v, size, scale);\n            })\n            .join(',');\n    var opacity = markup.opacity || 1;\n    return {\n      'stroke-linecap': lineCap,\n      'stroke-linejoin': lineJoin,\n      'stroke-width': strokeWidth || 0,\n      'stroke-dasharray': dashes,\n      stroke: stroke,\n      fill: fill,\n      opacity: opacity\n    };\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  var getMarkupRect = function getMarkupRect(rect, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var left =\n      getMarkupValue(rect.x, size, scalar, 'width') ||\n      getMarkupValue(rect.left, size, scalar, 'width');\n    var top =\n      getMarkupValue(rect.y, size, scalar, 'height') ||\n      getMarkupValue(rect.top, size, scalar, 'height');\n    var width = getMarkupValue(rect.width, size, scalar, 'width');\n    var height = getMarkupValue(rect.height, size, scalar, 'height');\n    var right = getMarkupValue(rect.right, size, scalar, 'width');\n    var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n    if (!isDefined(top)) {\n      if (isDefined(height) && isDefined(bottom)) {\n        top = size.height - height - bottom;\n      } else {\n        top = bottom;\n      }\n    }\n\n    if (!isDefined(left)) {\n      if (isDefined(width) && isDefined(right)) {\n        left = size.width - width - right;\n      } else {\n        left = right;\n      }\n    }\n\n    if (!isDefined(width)) {\n      if (isDefined(left) && isDefined(right)) {\n        width = size.width - left - right;\n      } else {\n        width = 0;\n      }\n    }\n\n    if (!isDefined(height)) {\n      if (isDefined(top) && isDefined(bottom)) {\n        height = size.height - top - bottom;\n      } else {\n        height = 0;\n      }\n    }\n\n    return {\n      x: left || 0,\n      y: top || 0,\n      width: width || 0,\n      height: height || 0\n    };\n  };\n\n  var pointsToPathShape = function pointsToPathShape(points) {\n    return points\n      .map(function(point, index) {\n        return ''\n          .concat(index === 0 ? 'M' : 'L', ' ')\n          .concat(point.x, ' ')\n          .concat(point.y);\n      })\n      .join(' ');\n  };\n\n  var setAttributes = function setAttributes(element, attr) {\n    return Object.keys(attr).forEach(function(key) {\n      return element.setAttribute(key, attr[key]);\n    });\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svg = function svg(tag, attr) {\n    var element = document.createElementNS(ns, tag);\n    if (attr) {\n      setAttributes(element, attr);\n    }\n    return element;\n  };\n\n  var updateRect = function updateRect(element) {\n    return setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles)\n    );\n  };\n\n  var updateEllipse = function updateEllipse(element) {\n    var cx = element.rect.x + element.rect.width * 0.5;\n    var cy = element.rect.y + element.rect.height * 0.5;\n    var rx = element.rect.width * 0.5;\n    var ry = element.rect.height * 0.5;\n    return setAttributes(\n      element,\n      Object.assign(\n        {\n          cx: cx,\n          cy: cy,\n          rx: rx,\n          ry: ry\n        },\n        element.styles\n      )\n    );\n  };\n\n  var IMAGE_FIT_STYLE = {\n    contain: 'xMidYMid meet',\n    cover: 'xMidYMid slice'\n  };\n\n  var updateImage = function updateImage(element, markup) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n      })\n    );\n  };\n\n  var TEXT_ANCHOR = {\n    left: 'start',\n    center: 'middle',\n    right: 'end'\n  };\n\n  var updateText = function updateText(element, markup, size, scale) {\n    var fontSize = getMarkupValue(markup.fontSize, size, scale);\n    var fontFamily = markup.fontFamily || 'sans-serif';\n    var fontWeight = markup.fontWeight || 'normal';\n    var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        'stroke-width': 0,\n        'font-weight': fontWeight,\n        'font-size': fontSize,\n        'font-family': fontFamily,\n        'text-anchor': textAlign\n      })\n    );\n\n    // update text\n    if (element.text !== markup.text) {\n      element.text = markup.text;\n      element.textContent = markup.text.length ? markup.text : ' ';\n    }\n  };\n\n  var updateLine = function updateLine(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        fill: 'none'\n      })\n    );\n\n    var line = element.childNodes[0];\n    var begin = element.childNodes[1];\n    var end = element.childNodes[2];\n\n    var origin = element.rect;\n\n    var target = {\n      x: element.rect.x + element.rect.width,\n      y: element.rect.y + element.rect.height\n    };\n\n    setAttributes(line, {\n      x1: origin.x,\n      y1: origin.y,\n      x2: target.x,\n      y2: target.y\n    });\n\n    if (!markup.lineDecoration) return;\n\n    begin.style.display = 'none';\n    end.style.display = 'none';\n\n    var v = vectorNormalize({\n      x: target.x - origin.x,\n      y: target.y - origin.y\n    });\n\n    var l = getMarkupValue(0.05, size, scale);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n      var arrowBeginRotationPoint = vectorMultiply(v, l);\n      var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n      var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n      var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n      setAttributes(begin, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowBeginA.x, ',')\n          .concat(arrowBeginA.y, ' L')\n          .concat(origin.x, ',')\n          .concat(origin.y, ' L')\n          .concat(arrowBeginB.x, ',')\n          .concat(arrowBeginB.y)\n      });\n    }\n\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n      var arrowEndRotationPoint = vectorMultiply(v, -l);\n      var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n      var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n      var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n      setAttributes(end, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowEndA.x, ',')\n          .concat(arrowEndA.y, ' L')\n          .concat(target.x, ',')\n          .concat(target.y, ' L')\n          .concat(arrowEndB.x, ',')\n          .concat(arrowEndB.y)\n      });\n    }\n  };\n\n  var updatePath = function updatePath(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.styles, {\n        fill: 'none',\n        d: pointsToPathShape(\n          markup.points.map(function(point) {\n            return {\n              x: getMarkupValue(point.x, size, scale, 'width'),\n              y: getMarkupValue(point.y, size, scale, 'height')\n            };\n          })\n        )\n      })\n    );\n  };\n\n  var createShape = function createShape(node) {\n    return function(markup) {\n      return svg(node, { id: markup.id });\n    };\n  };\n\n  var createImage = function createImage(markup) {\n    var shape = svg('image', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round',\n      opacity: '0'\n    });\n\n    shape.onload = function() {\n      shape.setAttribute('opacity', markup.opacity || 1);\n    };\n    shape.setAttributeNS(\n      'http://www.w3.org/1999/xlink',\n      'xlink:href',\n      markup.src\n    );\n    return shape;\n  };\n\n  var createLine = function createLine(markup) {\n    var shape = svg('g', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round'\n    });\n\n    var line = svg('line');\n    shape.appendChild(line);\n\n    var begin = svg('path');\n    shape.appendChild(begin);\n\n    var end = svg('path');\n    shape.appendChild(end);\n\n    return shape;\n  };\n\n  var CREATE_TYPE_ROUTES = {\n    image: createImage,\n    rect: createShape('rect'),\n    ellipse: createShape('ellipse'),\n    text: createShape('text'),\n    path: createShape('path'),\n    line: createLine\n  };\n\n  var UPDATE_TYPE_ROUTES = {\n    rect: updateRect,\n    ellipse: updateEllipse,\n    image: updateImage,\n    text: updateText,\n    path: updatePath,\n    line: updateLine\n  };\n\n  var createMarkupByType = function createMarkupByType(type, markup) {\n    return CREATE_TYPE_ROUTES[type](markup);\n  };\n\n  var updateMarkupByType = function updateMarkupByType(\n    element,\n    type,\n    markup,\n    size,\n    scale\n  ) {\n    if (type !== 'path') {\n      element.rect = getMarkupRect(markup, size, scale);\n    }\n    element.styles = getMarkupStyles(markup, size, scale);\n    UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n  };\n\n  var MARKUP_RECT = [\n    'x',\n    'y',\n    'left',\n    'top',\n    'right',\n    'bottom',\n    'width',\n    'height'\n  ];\n\n  var toOptionalFraction = function toOptionalFraction(value) {\n    return typeof value === 'string' && /%/.test(value)\n      ? parseFloat(value) / 100\n      : value;\n  };\n\n  // adds default markup properties, clones markup\n  var prepareMarkup = function prepareMarkup(markup) {\n    var _markup = _slicedToArray(markup, 2),\n      type = _markup[0],\n      props = _markup[1];\n\n    var rect = props.points\n      ? {}\n      : MARKUP_RECT.reduce(function(prev, curr) {\n          prev[curr] = toOptionalFraction(props[curr]);\n          return prev;\n        }, {});\n\n    return [\n      type,\n      Object.assign(\n        {\n          zIndex: 0\n        },\n        props,\n        rect\n      )\n    ];\n  };\n\n  var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n    if (a[1].zIndex > b[1].zIndex) {\n      return 1;\n    }\n    if (a[1].zIndex < b[1].zIndex) {\n      return -1;\n    }\n    return 0;\n  };\n\n  var createMarkupView = function createMarkupView(_) {\n    return _.utils.createView({\n      name: 'image-preview-markup',\n      tag: 'svg',\n      ignoreRect: true,\n      mixins: {\n        apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n      },\n\n      write: function write(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!props.dirty) return;\n        var crop = props.crop,\n          resize = props.resize,\n          markup = props.markup;\n\n        var viewWidth = props.width;\n        var viewHeight = props.height;\n\n        var cropWidth = crop.width;\n        var cropHeight = crop.height;\n\n        if (resize) {\n          var _size = resize.size;\n\n          var outputWidth = _size && _size.width;\n          var outputHeight = _size && _size.height;\n          var outputFit = resize.mode;\n          var outputUpscale = resize.upscale;\n\n          if (outputWidth && !outputHeight) outputHeight = outputWidth;\n          if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n          var shouldUpscale =\n            cropWidth < outputWidth && cropHeight < outputHeight;\n\n          if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n            var scalarWidth = outputWidth / cropWidth;\n            var scalarHeight = outputHeight / cropHeight;\n\n            if (outputFit === 'force') {\n              cropWidth = outputWidth;\n              cropHeight = outputHeight;\n            } else {\n              var scalar;\n              if (outputFit === 'cover') {\n                scalar = Math.max(scalarWidth, scalarHeight);\n              } else if (outputFit === 'contain') {\n                scalar = Math.min(scalarWidth, scalarHeight);\n              }\n              cropWidth = cropWidth * scalar;\n              cropHeight = cropHeight * scalar;\n            }\n          }\n        }\n\n        var size = {\n          width: viewWidth,\n          height: viewHeight\n        };\n\n        root.element.setAttribute('width', size.width);\n        root.element.setAttribute('height', size.height);\n\n        var scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n        // clear\n        root.element.innerHTML = '';\n\n        // get filter\n        var markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n        // draw new\n        markup\n          .filter(markupFilter)\n          .map(prepareMarkup)\n          .sort(sortMarkupByZIndex)\n          .forEach(function(markup) {\n            var _markup = _slicedToArray(markup, 2),\n              type = _markup[0],\n              settings = _markup[1];\n\n            // create\n            var element = createMarkupByType(type, settings);\n\n            // update\n            updateMarkupByType(element, type, settings, size, scale);\n\n            // add\n            root.element.appendChild(element);\n          });\n      }\n    });\n  };\n\n  var createVector$1 = function createVector(x, y) {\n    return { x: x, y: y };\n  };\n\n  var vectorDot = function vectorDot(a, b) {\n    return a.x * b.x + a.y * b.y;\n  };\n\n  var vectorSubtract = function vectorSubtract(a, b) {\n    return createVector$1(a.x - b.x, a.y - b.y);\n  };\n\n  var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n    return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n  };\n\n  var vectorDistance = function vectorDistance(a, b) {\n    return Math.sqrt(vectorDistanceSquared(a, b));\n  };\n\n  var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n    var a = length;\n\n    var A = 1.5707963267948966;\n    var B = rotation;\n    var C = 1.5707963267948966 - rotation;\n\n    var sinA = Math.sin(A);\n    var sinB = Math.sin(B);\n    var sinC = Math.sin(C);\n    var cosC = Math.cos(C);\n    var ratio = a / sinA;\n    var b = ratio * sinB;\n    var c = ratio * sinC;\n\n    return createVector$1(cosC * b, cosC * c);\n  };\n\n  var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n    var w = rect.width;\n    var h = rect.height;\n\n    var hor = getOffsetPointOnEdge(w, rotation);\n    var ver = getOffsetPointOnEdge(h, rotation);\n\n    var tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n    var tr = createVector$1(\n      rect.x + rect.width + Math.abs(ver.y),\n      rect.y + Math.abs(ver.x)\n    );\n\n    var bl = createVector$1(\n      rect.x - Math.abs(ver.y),\n      rect.y + rect.height - Math.abs(ver.x)\n    );\n\n    return {\n      width: vectorDistance(tl, tr),\n      height: vectorDistance(tl, bl)\n    };\n  };\n\n  var calculateCanvasSize = function calculateCanvasSize(\n    image,\n    canvasAspectRatio\n  ) {\n    var zoom =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var imageAspectRatio = image.height / image.width;\n\n    // determine actual pixels on x and y axis\n    var canvasWidth = 1;\n    var canvasHeight = canvasAspectRatio;\n    var imgWidth = 1;\n    var imgHeight = imageAspectRatio;\n    if (imgHeight > canvasHeight) {\n      imgHeight = canvasHeight;\n      imgWidth = imgHeight / imageAspectRatio;\n    }\n\n    var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n    var width = image.width / (zoom * scalar * imgWidth);\n    var height = width * canvasAspectRatio;\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  var getImageRectZoomFactor = function getImageRectZoomFactor(\n    imageRect,\n    cropRect,\n    rotation,\n    center\n  ) {\n    // calculate available space round image center position\n    var cx = center.x > 0.5 ? 1 - center.x : center.x;\n    var cy = center.y > 0.5 ? 1 - center.y : center.y;\n    var imageWidth = cx * 2 * imageRect.width;\n    var imageHeight = cy * 2 * imageRect.height;\n\n    // calculate rotated crop rectangle size\n    var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n    // calculate scalar required to fit image\n    return Math.max(\n      rotatedCropSize.width / imageWidth,\n      rotatedCropSize.height / imageHeight\n    );\n  };\n\n  var getCenteredCropRect = function getCenteredCropRect(\n    container,\n    aspectRatio\n  ) {\n    var width = container.width;\n    var height = width * aspectRatio;\n    if (height > container.height) {\n      height = container.height;\n      width = height / aspectRatio;\n    }\n    var x = (container.width - width) * 0.5;\n    var y = (container.height - height) * 0.5;\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  var getCurrentCropSize = function getCurrentCropSize(imageSize) {\n    var crop =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var zoom = crop.zoom,\n      rotation = crop.rotation,\n      center = crop.center,\n      aspectRatio = crop.aspectRatio;\n\n    if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n    var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n    var canvasCenter = {\n      x: canvasSize.width * 0.5,\n      y: canvasSize.height * 0.5\n    };\n\n    var stage = {\n      x: 0,\n      y: 0,\n      width: canvasSize.width,\n      height: canvasSize.height,\n      center: canvasCenter\n    };\n\n    var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n    var stageZoomFactor = getImageRectZoomFactor(\n      imageSize,\n      getCenteredCropRect(stage, aspectRatio),\n      rotation,\n      shouldLimit ? center : { x: 0.5, y: 0.5 }\n    );\n\n    var scale = zoom * stageZoomFactor;\n\n    // start drawing\n    return {\n      widthFloat: canvasSize.width / scale,\n      heightFloat: canvasSize.height / scale,\n      width: Math.round(canvasSize.width / scale),\n      height: Math.round(canvasSize.height / scale)\n    };\n  };\n\n  var IMAGE_SCALE_SPRING_PROPS = {\n    type: 'spring',\n    stiffness: 0.5,\n    damping: 0.45,\n    mass: 10\n  };\n\n  // does horizontal and vertical flipping\n  var createBitmapView = function createBitmapView(_) {\n    return _.utils.createView({\n      name: 'image-bitmap',\n      ignoreRect: true,\n      mixins: { styles: ['scaleX', 'scaleY'] },\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        root.appendChild(props.image);\n      }\n    });\n  };\n\n  // shifts and rotates image\n  var createImageCanvasWrapper = function createImageCanvasWrapper(_) {\n    return _.utils.createView({\n      name: 'image-canvas-wrapper',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['crop', 'width', 'height'],\n\n        styles: [\n          'originX',\n          'originY',\n          'translateX',\n          'translateY',\n          'scaleX',\n          'scaleY',\n          'rotateZ'\n        ],\n\n        animations: {\n          originX: IMAGE_SCALE_SPRING_PROPS,\n          originY: IMAGE_SCALE_SPRING_PROPS,\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateX: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          rotateZ: IMAGE_SCALE_SPRING_PROPS\n        }\n      },\n\n      create: function create(_ref2) {\n        var root = _ref2.root,\n          props = _ref2.props;\n        props.width = props.image.width;\n        props.height = props.image.height;\n        root.ref.bitmap = root.appendChildView(\n          root.createChildView(createBitmapView(_), { image: props.image })\n        );\n      },\n      write: function write(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        var flip = props.crop.flip;\n        var bitmap = root.ref.bitmap;\n        bitmap.scaleX = flip.horizontal ? -1 : 1;\n        bitmap.scaleY = flip.vertical ? -1 : 1;\n      }\n    });\n  };\n\n  // clips canvas to correct aspect ratio\n  var createClipView = function createClipView(_) {\n    return _.utils.createView({\n      name: 'image-clip',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: [\n          'crop',\n          'markup',\n          'resize',\n          'width',\n          'height',\n          'dirty',\n          'background'\n        ],\n\n        styles: ['width', 'height', 'opacity'],\n        animations: {\n          opacity: { type: 'tween', duration: 250 }\n        }\n      },\n\n      didWriteView: function didWriteView(_ref4) {\n        var root = _ref4.root,\n          props = _ref4.props;\n        if (!props.background) return;\n        root.element.style.backgroundColor = props.background;\n      },\n      create: function create(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n\n        root.ref.image = root.appendChildView(\n          root.createChildView(\n            createImageCanvasWrapper(_),\n            Object.assign({}, props)\n          )\n        );\n\n        root.ref.createMarkup = function() {\n          if (root.ref.markup) return;\n          root.ref.markup = root.appendChildView(\n            root.createChildView(createMarkupView(_), Object.assign({}, props))\n          );\n        };\n\n        root.ref.destroyMarkup = function() {\n          if (!root.ref.markup) return;\n          root.removeChildView(root.ref.markup);\n          root.ref.markup = null;\n        };\n\n        // set up transparency grid\n        var transparencyIndicator = root.query(\n          'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n        );\n        if (transparencyIndicator === null) return;\n\n        // grid pattern\n        if (transparencyIndicator === 'grid') {\n          root.element.dataset.transparencyIndicator = transparencyIndicator;\n        }\n        // basic color\n        else {\n          root.element.dataset.transparencyIndicator = 'color';\n        }\n      },\n      write: function write(_ref6) {\n        var root = _ref6.root,\n          props = _ref6.props,\n          shouldOptimize = _ref6.shouldOptimize;\n        var crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty,\n          width = props.width,\n          height = props.height;\n\n        root.ref.image.crop = crop;\n\n        var stage = {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height,\n          center: {\n            x: width * 0.5,\n            y: height * 0.5\n          }\n        };\n\n        var image = {\n          width: root.ref.image.width,\n          height: root.ref.image.height\n        };\n\n        var origin = {\n          x: crop.center.x * image.width,\n          y: crop.center.y * image.height\n        };\n\n        var translation = {\n          x: stage.center.x - image.width * crop.center.x,\n          y: stage.center.y - image.height * crop.center.y\n        };\n\n        var rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n        var cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n        var shouldLimit =\n          typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var stageZoomFactor = getImageRectZoomFactor(\n          image,\n          getCenteredCropRect(stage, cropAspectRatio),\n\n          rotation,\n          shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n        );\n\n        var scale = crop.zoom * stageZoomFactor;\n\n        // update markup view\n        if (markup && markup.length) {\n          root.ref.createMarkup();\n          root.ref.markup.width = width;\n          root.ref.markup.height = height;\n          root.ref.markup.resize = resize;\n          root.ref.markup.dirty = dirty;\n          root.ref.markup.markup = markup;\n          root.ref.markup.crop = getCurrentCropSize(image, crop);\n        } else if (root.ref.markup) {\n          root.ref.destroyMarkup();\n        }\n\n        // update image view\n        var imageView = root.ref.image;\n\n        // don't update clip layout\n        if (shouldOptimize) {\n          imageView.originX = null;\n          imageView.originY = null;\n          imageView.translateX = null;\n          imageView.translateY = null;\n          imageView.rotateZ = null;\n          imageView.scaleX = null;\n          imageView.scaleY = null;\n          return;\n        }\n\n        imageView.originX = origin.x;\n        imageView.originY = origin.y;\n        imageView.translateX = translation.x;\n        imageView.translateY = translation.y;\n        imageView.rotateZ = rotation;\n        imageView.scaleX = scale;\n        imageView.scaleY = scale;\n      }\n    });\n  };\n\n  var createImageView = function createImageView(_) {\n    return _.utils.createView({\n      name: 'image-preview',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n\n        styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n\n        animations: {\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          opacity: { type: 'tween', duration: 400 }\n        }\n      },\n\n      create: function create(_ref7) {\n        var root = _ref7.root,\n          props = _ref7.props;\n        root.ref.clip = root.appendChildView(\n          root.createChildView(createClipView(_), {\n            id: props.id,\n            image: props.image,\n            crop: props.crop,\n            markup: props.markup,\n            resize: props.resize,\n            dirty: props.dirty,\n            background: props.background\n          })\n        );\n      },\n      write: function write(_ref8) {\n        var root = _ref8.root,\n          props = _ref8.props,\n          shouldOptimize = _ref8.shouldOptimize;\n        var clip = root.ref.clip;\n        var image = props.image,\n          crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty;\n\n        clip.crop = crop;\n        clip.markup = markup;\n        clip.resize = resize;\n        clip.dirty = dirty;\n\n        // don't update clip layout\n        clip.opacity = shouldOptimize ? 0 : 1;\n\n        // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n        if (shouldOptimize || root.rect.element.hidden) return;\n\n        // calculate scaled preview image size\n        var imageAspectRatio = image.height / image.width;\n        var aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n        // calculate container size\n        var containerWidth = root.rect.inner.width;\n        var containerHeight = root.rect.inner.height;\n\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n        if (panelAspectRatio && !allowMultiple) {\n          fixedPreviewHeight = containerWidth * panelAspectRatio;\n          aspectRatio = panelAspectRatio;\n        }\n\n        // determine clip width and height\n        var clipHeight =\n          fixedPreviewHeight !== null\n            ? fixedPreviewHeight\n            : Math.max(\n                minPreviewHeight,\n                Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n              );\n\n        var clipWidth = clipHeight / aspectRatio;\n        if (clipWidth > containerWidth) {\n          clipWidth = containerWidth;\n          clipHeight = clipWidth * aspectRatio;\n        }\n\n        if (clipHeight > containerHeight) {\n          clipHeight = containerHeight;\n          clipWidth = containerHeight / aspectRatio;\n        }\n\n        clip.width = clipWidth;\n        clip.height = clipHeight;\n      }\n    });\n  };\n\n  var SVG_MASK =\n    '<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\\n    <defs>\\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\\n            <stop offset=\\'50%\\' stop-color=\\'#000000\\'/>\\n            <stop offset=\\'56%\\' stop-color=\\'#0a0a0a\\'/>\\n            <stop offset=\\'63%\\' stop-color=\\'#262626\\'/>\\n            <stop offset=\\'69%\\' stop-color=\\'#4f4f4f\\'/>\\n            <stop offset=\\'75%\\' stop-color=\\'#808080\\'/>\\n            <stop offset=\\'81%\\' stop-color=\\'#b1b1b1\\'/>\\n            <stop offset=\\'88%\\' stop-color=\\'#dadada\\'/>\\n            <stop offset=\\'94%\\' stop-color=\\'#f6f6f6\\'/>\\n            <stop offset=\\'100%\\' stop-color=\\'#ffffff\\'/>\\n        </radialGradient>\\n        <mask id=\"mask-__UID__\">\\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\\n        </mask>\\n    </defs>\\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\\n</svg>';\n\n  var SVGMaskUniqueId = 0;\n\n  var createImageOverlayView = function createImageOverlayView(fpAPI) {\n    return fpAPI.utils.createView({\n      name: 'image-preview-overlay',\n      tag: 'div',\n      ignoreRect: true,\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var mask = SVG_MASK;\n        if (document.querySelector('base')) {\n          var url = new URL(\n            window.location.href.replace(window.location.hash, '')\n          ).href;\n          mask = mask.replace(/url\\(\\#/g, 'url(' + url + '#');\n        }\n\n        SVGMaskUniqueId++;\n        root.element.classList.add(\n          'filepond--image-preview-overlay-'.concat(props.status)\n        );\n\n        root.element.innerHTML = mask.replace(/__UID__/g, SVGMaskUniqueId);\n      },\n      mixins: {\n        styles: ['opacity'],\n        animations: {\n          opacity: { type: 'spring', mass: 25 }\n        }\n      }\n    });\n  };\n\n  /**\n   * Bitmap Worker\n   */\n  var BitmapWorker = function BitmapWorker() {\n    self.onmessage = function(e) {\n      createImageBitmap(e.data.message.file).then(function(bitmap) {\n        self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n      });\n    };\n  };\n\n  /**\n   * ColorMatrix Worker\n   */\n  var ColorMatrixWorker = function ColorMatrixWorker() {\n    self.onmessage = function(e) {\n      var imageData = e.data.message.imageData;\n      var matrix = e.data.message.colorMatrix;\n\n      var data = imageData.data;\n      var l = data.length;\n\n      var m11 = matrix[0];\n      var m12 = matrix[1];\n      var m13 = matrix[2];\n      var m14 = matrix[3];\n      var m15 = matrix[4];\n\n      var m21 = matrix[5];\n      var m22 = matrix[6];\n      var m23 = matrix[7];\n      var m24 = matrix[8];\n      var m25 = matrix[9];\n\n      var m31 = matrix[10];\n      var m32 = matrix[11];\n      var m33 = matrix[12];\n      var m34 = matrix[13];\n      var m35 = matrix[14];\n\n      var m41 = matrix[15];\n      var m42 = matrix[16];\n      var m43 = matrix[17];\n      var m44 = matrix[18];\n      var m45 = matrix[19];\n\n      var index = 0,\n        r = 0.0,\n        g = 0.0,\n        b = 0.0,\n        a = 0.0;\n\n      for (; index < l; index += 4) {\n        r = data[index] / 255;\n        g = data[index + 1] / 255;\n        b = data[index + 2] / 255;\n        a = data[index + 3] / 255;\n        data[index] = Math.max(\n          0,\n          Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n        );\n        data[index + 1] = Math.max(\n          0,\n          Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n        );\n        data[index + 2] = Math.max(\n          0,\n          Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n        );\n        data[index + 3] = Math.max(\n          0,\n          Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n        );\n      }\n\n      self.postMessage({ id: e.data.id, message: imageData }, [\n        imageData.data.buffer\n      ]);\n    };\n  };\n\n  var getImageSize = function getImageSize(url, cb) {\n    var image = new Image();\n    image.onload = function() {\n      var width = image.naturalWidth;\n      var height = image.naturalHeight;\n      image = null;\n      cb(width, height);\n    };\n    image.src = url;\n  };\n\n  var transforms = {\n    1: function _() {\n      return [1, 0, 0, 1, 0, 0];\n    },\n    2: function _(width) {\n      return [-1, 0, 0, 1, width, 0];\n    },\n    3: function _(width, height) {\n      return [-1, 0, 0, -1, width, height];\n    },\n    4: function _(width, height) {\n      return [1, 0, 0, -1, 0, height];\n    },\n    5: function _() {\n      return [0, 1, 1, 0, 0, 0];\n    },\n    6: function _(width, height) {\n      return [0, 1, -1, 0, height, 0];\n    },\n    7: function _(width, height) {\n      return [0, -1, -1, 0, height, width];\n    },\n    8: function _(width) {\n      return [0, -1, 1, 0, 0, width];\n    }\n  };\n\n  var fixImageOrientation = function fixImageOrientation(\n    ctx,\n    width,\n    height,\n    orientation\n  ) {\n    // no orientation supplied\n    if (orientation === -1) {\n      return;\n    }\n\n    ctx.transform.apply(ctx, transforms[orientation](width, height));\n  };\n\n  // draws the preview image to canvas\n  var createPreviewImage = function createPreviewImage(\n    data,\n    width,\n    height,\n    orientation\n  ) {\n    // can't draw on half pixels\n    width = Math.round(width);\n    height = Math.round(height);\n\n    // draw image\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n\n    // if is rotated incorrectly swap width and height\n    if (orientation >= 5 && orientation <= 8) {\n      var _ref = [height, width];\n      width = _ref[0];\n      height = _ref[1];\n    }\n\n    // correct image orientation\n    fixImageOrientation(ctx, width, height, orientation);\n\n    // draw the image\n    ctx.drawImage(data, 0, 0, width, height);\n\n    return canvas;\n  };\n\n  var isBitmap = function isBitmap(file) {\n    return /^image/.test(file.type) && !/svg/.test(file.type);\n  };\n\n  var MAX_WIDTH = 10;\n  var MAX_HEIGHT = 10;\n\n  var calculateAverageColor = function calculateAverageColor(image) {\n    var scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var width = (canvas.width = Math.ceil(image.width * scalar));\n    var height = (canvas.height = Math.ceil(image.height * scalar));\n    ctx.drawImage(image, 0, 0, width, height);\n    var data = null;\n    try {\n      data = ctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      return null;\n    }\n    var l = data.length;\n\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var i = 0;\n\n    for (; i < l; i += 4) {\n      r += data[i] * data[i];\n      g += data[i + 1] * data[i + 1];\n      b += data[i + 2] * data[i + 2];\n    }\n\n    r = averageColor(r, l);\n    g = averageColor(g, l);\n    b = averageColor(b, l);\n\n    return { r: r, g: g, b: b };\n  };\n\n  var averageColor = function averageColor(c, l) {\n    return Math.floor(Math.sqrt(c / (l / 4)));\n  };\n\n  var cloneCanvas = function cloneCanvas(origin, target) {\n    target = target || document.createElement('canvas');\n    target.width = origin.width;\n    target.height = origin.height;\n    var ctx = target.getContext('2d');\n    ctx.drawImage(origin, 0, 0);\n    return target;\n  };\n\n  var cloneImageData = function cloneImageData(imageData) {\n    var id;\n    try {\n      id = new ImageData(imageData.width, imageData.height);\n    } catch (e) {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      id = ctx.createImageData(imageData.width, imageData.height);\n    }\n    id.data.set(new Uint8ClampedArray(imageData.data));\n    return id;\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.crossOrigin = 'Anonymous';\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var createImageWrapperView = function createImageWrapperView(_) {\n    // create overlay view\n    var OverlayView = createImageOverlayView(_);\n\n    var ImageView = createImageView(_);\n    var createWorker = _.utils.createWorker;\n\n    var applyFilter = function applyFilter(root, filter, target) {\n      return new Promise(function(resolve) {\n        // will store image data for future filter updates\n        if (!root.ref.imageData) {\n          root.ref.imageData = target\n            .getContext('2d')\n            .getImageData(0, 0, target.width, target.height);\n        }\n\n        // get image data reference\n        var imageData = cloneImageData(root.ref.imageData);\n\n        if (!filter || filter.length !== 20) {\n          target.getContext('2d').putImageData(imageData, 0, 0);\n          return resolve();\n        }\n\n        var worker = createWorker(ColorMatrixWorker);\n        worker.post(\n          {\n            imageData: imageData,\n            colorMatrix: filter\n          },\n\n          function(response) {\n            // apply filtered colors\n            target.getContext('2d').putImageData(response, 0, 0);\n\n            // stop worker\n            worker.terminate();\n\n            // done!\n            resolve();\n          },\n          [imageData.data.buffer]\n        );\n      });\n    };\n\n    var removeImageView = function removeImageView(root, imageView) {\n      root.removeChildView(imageView);\n      imageView.image.width = 1;\n      imageView.image.height = 1;\n      imageView._destroy();\n    };\n\n    // remove an image\n    var shiftImage = function shiftImage(_ref) {\n      var root = _ref.root;\n      var imageView = root.ref.images.shift();\n      imageView.opacity = 0;\n      imageView.translateY = -15;\n      root.ref.imageViewBin.push(imageView);\n      return imageView;\n    };\n\n    // add new image\n    var pushImage = function pushImage(_ref2) {\n      var root = _ref2.root,\n        props = _ref2.props,\n        image = _ref2.image;\n      var id = props.id;\n      var item = root.query('GET_ITEM', { id: id });\n      if (!item) return;\n\n      var crop = item.getMetadata('crop') || {\n        center: {\n          x: 0.5,\n          y: 0.5\n        },\n\n        flip: {\n          horizontal: false,\n          vertical: false\n        },\n\n        zoom: 1,\n        rotation: 0,\n        aspectRatio: null\n      };\n\n      var background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      var markup;\n      var resize;\n      var dirty = false;\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        markup = item.getMetadata('markup') || [];\n        resize = item.getMetadata('resize');\n        dirty = true;\n      }\n\n      // append image presenter\n      var imageView = root.appendChildView(\n        root.createChildView(ImageView, {\n          id: id,\n          image: image,\n          crop: crop,\n          resize: resize,\n          markup: markup,\n          dirty: dirty,\n          background: background,\n          opacity: 0,\n          scaleX: 1.15,\n          scaleY: 1.15,\n          translateY: 15\n        }),\n\n        root.childViews.length\n      );\n\n      root.ref.images.push(imageView);\n\n      // reveal the preview image\n      imageView.opacity = 1;\n      imageView.scaleX = 1;\n      imageView.scaleY = 1;\n      imageView.translateY = 0;\n\n      // the preview is now ready to be drawn\n      setTimeout(function() {\n        root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id: id });\n      }, 250);\n    };\n\n    var updateImage = function updateImage(_ref3) {\n      var root = _ref3.root,\n        props = _ref3.props;\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n      var imageView = root.ref.images[root.ref.images.length - 1];\n      imageView.crop = item.getMetadata('crop');\n      imageView.background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        imageView.dirty = true;\n        imageView.resize = item.getMetadata('resize');\n        imageView.markup = item.getMetadata('markup');\n      }\n    };\n\n    // replace image preview\n    var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n      var root = _ref4.root,\n        props = _ref4.props,\n        action = _ref4.action;\n      // only filter and crop trigger redraw\n      if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n      // no images to update, exit\n      if (!root.ref.images.length) return;\n\n      // no item found, exit\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n\n      // for now, update existing image when filtering\n      if (/filter/.test(action.change.key)) {\n        var imageView = root.ref.images[root.ref.images.length - 1];\n        applyFilter(root, action.change.value, imageView.image);\n        return;\n      }\n\n      if (/crop|markup|resize/.test(action.change.key)) {\n        var crop = item.getMetadata('crop');\n        var image = root.ref.images[root.ref.images.length - 1];\n\n        // if aspect ratio has changed, we need to create a new image\n        if (\n          crop &&\n          crop.aspectRatio &&\n          image.crop &&\n          image.crop.aspectRatio &&\n          Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001\n        ) {\n          var _imageView = shiftImage({ root: root });\n          pushImage({\n            root: root,\n            props: props,\n            image: cloneCanvas(_imageView.image)\n          });\n        }\n        // if not, we can update the current image\n        else {\n          updateImage({ root: root, props: props });\n        }\n      }\n    };\n\n    var canCreateImageBitmap = function canCreateImageBitmap(file) {\n      // Firefox versions before 58 will freeze when running createImageBitmap\n      // in a Web Worker so we detect those versions and return false for support\n      var userAgent = window.navigator.userAgent;\n      var isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n      var firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n      if (firefoxVersion <= 58) return false;\n\n      return 'createImageBitmap' in window && isBitmap(file);\n    };\n\n    /**\n     * Write handler for when preview container has been created\n     */\n    var didCreatePreviewContainer = function didCreatePreviewContainer(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // determine image size of this item\n      getImageSize(fileURL, function(width, height) {\n        // we can now scale the panel to the final size\n        root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n          id: id,\n          width: width,\n          height: height\n        });\n      });\n    };\n\n    var drawPreview = function drawPreview(_ref6) {\n      var root = _ref6.root,\n        props = _ref6.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // fallback\n      var loadPreviewFallback = function loadPreviewFallback() {\n        // let's scale the image in the main thread :(\n        loadImage(fileURL).then(previewImageLoaded);\n      };\n\n      // image is now ready\n      var previewImageLoaded = function previewImageLoaded(imageData) {\n        // the file url is no longer needed\n        URL.revokeObjectURL(fileURL);\n\n        // draw the scaled down version here and use that as source so bitmapdata can be closed\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap if orientation is incorrect\n        var width = imageData.width,\n          height = imageData.height;\n\n        // if no width or height, just return early.\n        if (!width || !height) return;\n\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref7 = [height, width];\n          width = _ref7[0];\n          height = _ref7[1];\n        }\n\n        // scale canvas based on pixel density\n        // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n        var pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n        // we want as much pixels to work with as possible,\n        // this multiplies the minimum image resolution,\n        // so when zooming in it doesn't get too blurry\n        var zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n        // imaeg scale factor\n        var scaleFactor = zoomFactor * pixelDensityFactor;\n\n        // calculate scaled preview image size\n        var previewImageRatio = height / width;\n\n        // calculate image preview height and width\n        var previewContainerWidth = root.rect.element.width;\n        var previewContainerHeight = root.rect.element.height;\n\n        var imageWidth = previewContainerWidth;\n        var imageHeight = imageWidth * previewImageRatio;\n\n        if (previewImageRatio > 1) {\n          imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n          imageHeight = imageWidth * previewImageRatio;\n        } else {\n          imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n          imageWidth = imageHeight / previewImageRatio;\n        }\n\n        // transfer to image tag so no canvas memory wasted on iOS\n        var previewImage = createPreviewImage(\n          imageData,\n          imageWidth,\n          imageHeight,\n          orientation\n        );\n\n        // done\n        var done = function done() {\n          // calculate average image color, disabled for now\n          var averageColor = root.query(\n            'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n          )\n            ? calculateAverageColor(data)\n            : null;\n          item.setMetadata('color', averageColor, true);\n\n          // data has been transferred to canvas ( if was ImageBitmap )\n          if ('close' in imageData) {\n            imageData.close();\n          }\n\n          // show the overlay\n          root.ref.overlayShadow.opacity = 1;\n\n          // create the first image\n          pushImage({ root: root, props: props, image: previewImage });\n        };\n\n        // apply filter\n        var filter = item.getMetadata('filter');\n        if (filter) {\n          applyFilter(root, filter, previewImage).then(done);\n        } else {\n          done();\n        }\n      };\n\n      // if we support scaling using createImageBitmap we use a worker\n      if (canCreateImageBitmap(item.file)) {\n        // let's scale the image in a worker\n        var worker = createWorker(BitmapWorker);\n\n        worker.post(\n          {\n            file: item.file\n          },\n\n          function(imageBitmap) {\n            // destroy worker\n            worker.terminate();\n\n            // no bitmap returned, must be something wrong,\n            // try the oldschool way\n            if (!imageBitmap) {\n              loadPreviewFallback();\n              return;\n            }\n\n            // yay we got our bitmap, let's continue showing the preview\n            previewImageLoaded(imageBitmap);\n          }\n        );\n      } else {\n        // create fallback preview\n        loadPreviewFallback();\n      }\n    };\n\n    /**\n     * Write handler for when the preview image is ready to be animated\n     */\n    var didDrawPreview = function didDrawPreview(_ref8) {\n      var root = _ref8.root;\n      // get last added image\n      var image = root.ref.images[root.ref.images.length - 1];\n      image.translateY = 0;\n      image.scaleX = 1.0;\n      image.scaleY = 1.0;\n      image.opacity = 1;\n    };\n\n    /**\n     * Write handler for when the preview has been loaded\n     */\n    var restoreOverlay = function restoreOverlay(_ref9) {\n      var root = _ref9.root;\n      root.ref.overlayShadow.opacity = 1;\n      root.ref.overlayError.opacity = 0;\n      root.ref.overlaySuccess.opacity = 0;\n    };\n\n    var didThrowError = function didThrowError(_ref10) {\n      var root = _ref10.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlayError.opacity = 1;\n    };\n\n    var didCompleteProcessing = function didCompleteProcessing(_ref11) {\n      var root = _ref11.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlaySuccess.opacity = 1;\n    };\n\n    /**\n     * Constructor\n     */\n    var create = function create(_ref12) {\n      var root = _ref12.root;\n      // image view\n      root.ref.images = [];\n\n      // the preview image data (we need this to filter the image)\n      root.ref.imageData = null;\n\n      // image bin\n      root.ref.imageViewBin = [];\n\n      // image overlays\n      root.ref.overlayShadow = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'idle'\n        })\n      );\n\n      root.ref.overlaySuccess = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'success'\n        })\n      );\n\n      root.ref.overlayError = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'failure'\n        })\n      );\n    };\n\n    return _.utils.createView({\n      name: 'image-preview-wrapper',\n      create: create,\n      styles: ['height'],\n      apis: ['height'],\n      destroy: function destroy(_ref13) {\n        var root = _ref13.root;\n        // we resize the image so memory on iOS 12 is released more quickly (it seems)\n        root.ref.images.forEach(function(imageView) {\n          imageView.image.width = 1;\n          imageView.image.height = 1;\n        });\n      },\n      didWriteView: function didWriteView(_ref14) {\n        var root = _ref14.root;\n        root.ref.images.forEach(function(imageView) {\n          imageView.dirty = false;\n        });\n      },\n      write: _.utils.createRoute(\n        {\n          // image preview stated\n          DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n          DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n          DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n          // file states\n          DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n          DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n          DID_THROW_ITEM_INVALID: didThrowError,\n          DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n          DID_START_ITEM_PROCESSING: restoreOverlay,\n          DID_REVERT_ITEM_PROCESSING: restoreOverlay\n        },\n\n        function(_ref15) {\n          var root = _ref15.root;\n          // views on death row\n          var viewsToRemove = root.ref.imageViewBin.filter(function(imageView) {\n            return imageView.opacity === 0;\n          });\n\n          // views to retain\n          root.ref.imageViewBin = root.ref.imageViewBin.filter(function(\n            imageView\n          ) {\n            return imageView.opacity > 0;\n          });\n\n          // remove these views\n          viewsToRemove.forEach(function(imageView) {\n            return removeImageView(root, imageView);\n          });\n          viewsToRemove.length = 0;\n        }\n      )\n    });\n  };\n\n  /**\n   * Image Preview Plugin\n   */\n  var plugin = function plugin(fpAPI) {\n    var addFilter = fpAPI.addFilter,\n      utils = fpAPI.utils;\n    var Type = utils.Type,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    // imagePreviewView\n    var imagePreviewView = createImageWrapperView(fpAPI);\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view and only if is enabled for this cropper\n      if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n      // create the image preview plugin, but only do so if the item is an image\n      var didLoadItem = function didLoadItem(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var id = props.id;\n        var item = query('GET_ITEM', id);\n\n        // item could theoretically have been removed in the mean time\n        if (!item || !isFile(item.file) || item.archived) return;\n\n        // get the file object\n        var file = item.file;\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) return;\n\n        // test if is filtered\n        if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n        // exit if image size is too high and no createImageBitmap support\n        // this would simply bring the browser to its knees and that is not what we want\n        var supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n        var maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n        if (\n          !supportsCreateImageBitmap &&\n          maxPreviewFileSize &&\n          file.size > maxPreviewFileSize\n        )\n          return;\n\n        // set preview view\n        root.ref.imagePreview = view.appendChildView(\n          view.createChildView(imagePreviewView, { id: id })\n        );\n\n        // update height if is fixed\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (fixedPreviewHeight) {\n          root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n            id: item.id,\n            height: fixedPreviewHeight\n          });\n        }\n\n        // now ready\n        var queue =\n          !supportsCreateImageBitmap &&\n          file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n        root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id: id }, queue);\n      };\n\n      var rescaleItem = function rescaleItem(root, props) {\n        if (!root.ref.imagePreview) return;\n        var id = props.id;\n\n        // get item\n        var item = root.query('GET_ITEM', { id: id });\n        if (!item) return;\n\n        // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n        var fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n        // no data!\n        var _root$ref = root.ref,\n          imageWidth = _root$ref.imageWidth,\n          imageHeight = _root$ref.imageHeight;\n        if (!imageWidth || !imageHeight) return;\n\n        // get height min and max\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap of orientation is incorrect\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref2 = [imageHeight, imageWidth];\n          imageWidth = _ref2[0];\n          imageHeight = _ref2[1];\n        }\n\n        // scale up width and height when we're dealing with an SVG\n        if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n          var scalar = 2048 / imageWidth;\n          imageWidth *= scalar;\n          imageHeight *= scalar;\n        }\n\n        // image aspect ratio\n        var imageAspectRatio = imageHeight / imageWidth;\n\n        // we need the item to get to the crop size\n        var previewAspectRatio =\n          (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n        // preview height range\n        var previewHeightMax = Math.max(\n          minPreviewHeight,\n          Math.min(imageHeight, maxPreviewHeight)\n        );\n\n        var itemWidth = root.rect.element.width;\n        var previewHeight = Math.min(\n          itemWidth * previewAspectRatio,\n          previewHeightMax\n        );\n\n        // request update to panel height\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: previewHeight\n        });\n      };\n\n      var didResizeView = function didResizeView(_ref3) {\n        var root = _ref3.root;\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n        var root = _ref4.root,\n          action = _ref4.action;\n        if (action.change.key !== 'crop') return;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didCalculatePreviewSize = function didCalculatePreviewSize(_ref5) {\n        var root = _ref5.root,\n          action = _ref5.action;\n        // remember dimensions\n        root.ref.imageWidth = action.width;\n        root.ref.imageHeight = action.height;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n        root.ref.shouldDrawPreview = true;\n\n        // as image load could take a while and fire when draw loop is resting we need to give it a kick\n        root.dispatch('KICK');\n      };\n\n      // start writing\n      view.registerWriter(\n        createRoute(\n          {\n            DID_RESIZE_ROOT: didResizeView,\n            DID_STOP_RESIZE: didResizeView,\n            DID_LOAD_ITEM: didLoadItem,\n            DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n            DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n          },\n\n          function(_ref6) {\n            var root = _ref6.root,\n              props = _ref6.props;\n            // no preview view attached\n            if (!root.ref.imagePreview) return;\n\n            // don't do anything while hidden\n            if (root.rect.element.hidden) return;\n\n            // resize the item panel\n            if (root.ref.shouldRescale) {\n              rescaleItem(root, props);\n              root.ref.shouldRescale = false;\n            }\n\n            if (root.ref.shouldDrawPreview) {\n              // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n              requestAnimationFrame(function() {\n                // this requestAnimationFrame nesting is horrible but it fixes an issue with 100hz displays on Chrome\n                // https://github.com/pqina/filepond-plugin-image-preview/issues/57\n                requestAnimationFrame(function() {\n                  root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                    id: props.id\n                  });\n                });\n              });\n\n              root.ref.shouldDrawPreview = false;\n            }\n          }\n        )\n      );\n    });\n\n    // expose plugin\n    return {\n      options: {\n        // Enable or disable image preview\n        allowImagePreview: [true, Type.BOOLEAN],\n\n        // filters file items to determine which are shown as preview\n        imagePreviewFilterItem: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ],\n\n        // Fixed preview height\n        imagePreviewHeight: [null, Type.INT],\n\n        // Min image height\n        imagePreviewMinHeight: [44, Type.INT],\n\n        // Max image height\n        imagePreviewMaxHeight: [256, Type.INT],\n\n        // Max size of preview file for when createImageBitmap is not supported\n        imagePreviewMaxFileSize: [null, Type.INT],\n\n        // The amount of extra pixels added to the image preview to allow comfortable zooming\n        imagePreviewZoomFactor: [2, Type.INT],\n\n        // Should we upscale small images to fit the max bounding box of the preview area\n        imagePreviewUpscale: [false, Type.BOOLEAN],\n\n        // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n        imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n        // Style of the transparancy indicator used behind images\n        imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n        // Enables or disables reading average image color\n        imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n        // Enables or disables the previewing of markup\n        imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n        // Allows filtering of markup to only show certain shapes\n        imagePreviewMarkupFilter: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n"],"names":["global","factory","module","exports","this","plugin","_ref","addFilter","utils","Type","isString","replaceInString","guesstimateMimeType","getExtensionFromFilename","getFilenameFromURL","mimeTypeMatchesWildCard","mimeType","wildcard","mimeTypeGroup","exec","pop","wildcardGroup","slice","isValidMimeType","acceptedTypes","userInputType","some","acceptedType","test","getItemType","item","type","filename","extension","validateFile","acceptedFileTypes","typeDetector","length","Promise","resolve","reject","then","detectedType","catch","applyMimeTypeMap","map","acceptedFileType","Object","assign","accept","file","_ref2","query","_ref3","validationResult","handleRejection","acceptedFileTypesMapped","filter","label","acceptedFileTypesMapped_unique","index","indexOf","status","main","sub","allTypes","join","allButLastType","lastType","options","allowFileTypeValidation","BOOLEAN","ARRAY","labelFileTypeNotAllowed","STRING","fileValidateTypeLabelExpectedTypes","fileValidateTypeLabelExpectedTypesMap","OBJECT","fileValidateTypeDetectType","FUNCTION","isBrowser","window","document","dispatchEvent","CustomEvent","detail","isPreviewableImage","_AwaitValue","value","wrapped","_AsyncGenerator","gen","front","back","send","key","arg","request","next","resume","result","wrappedAwait","settle","done","err","_invoke","return","undefined","Symbol","asyncIterator","prototype","throw","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","Array","isArray","_arr","_n","_d","_e","_s","_i","iterator","push","TypeError","vectorMultiply","v","amount","createVector","x","y","vectorAdd","a","b","vectorNormalize","l","Math","sqrt","vectorRotate","radians","origin","cos","sin","t","arguments","getMarkupValue","size","scalar","axis","parseFloat","min","width","height","getMarkupStyles","markup","scale","lineStyle","borderStyle","fill","backgroundColor","fontColor","stroke","borderColor","lineColor","strokeWidth","borderWidth","lineWidth","lineCap","lineJoin","dashes","opacity","isDefined","getMarkupRect","rect","left","top","right","bottom","pointsToPathShape","points","point","concat","setAttributes","element","attr","keys","forEach","setAttribute","ns","svg","tag","createElementNS","updateRect","styles","updateEllipse","cx","cy","rx","ry","IMAGE_FIT_STYLE","contain","cover","updateImage","preserveAspectRatio","fit","TEXT_ANCHOR","center","updateText","fontSize","fontFamily","fontWeight","textAlign","text","textContent","updateLine","line","childNodes","begin","end","target","x1","y1","x2","y2","lineDecoration","style","display","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","d","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updatePath","createShape","node","id","createImage","shape","onload","setAttributeNS","src","createLine","appendChild","CREATE_TYPE_ROUTES","image","ellipse","path","UPDATE_TYPE_ROUTES","createMarkupByType","updateMarkupByType","MARKUP_RECT","toOptionalFraction","prepareMarkup","_markup","props","reduce","prev","curr","zIndex","sortMarkupByZIndex","createMarkupView","_","createView","name","ignoreRect","mixins","apis","write","root","dirty","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","_size","outputWidth","outputHeight","outputFit","mode","outputUpscale","upscale","shouldUpscale","scalarWidth","scalarHeight","max","innerHTML","markupFilter","sort","settings","createVector$1","vectorDot","vectorSubtract","vectorDistanceSquared","vectorDistance","getOffsetPointOnEdge","rotation","A","B","C","sinA","sinB","sinC","cosC","ratio","c","getRotatedRectSize","w","h","hor","ver","tl","abs","tr","bl","calculateCanvasSize","canvasAspectRatio","zoom","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","imageWidth","imageHeight","rotatedCropSize","getCenteredCropRect","container","aspectRatio","getCurrentCropSize","imageSize","canvasSize","canvasCenter","stage","shouldLimit","scaleToFit","stageZoomFactor","widthFloat","heightFloat","round","IMAGE_SCALE_SPRING_PROPS","stiffness","damping","mass","createBitmapView","create","createImageCanvasWrapper","animations","originX","originY","scaleX","scaleY","translateX","translateY","rotateZ","ref","bitmap","appendChildView","createChildView","flip","horizontal","vertical","createClipView","duration","didWriteView","_ref4","background","_ref5","createMarkup","destroyMarkup","removeChildView","transparencyIndicator","dataset","_ref6","shouldOptimize","translation","PI","cropAspectRatio","imageView","createImageView","_ref7","clip","_ref8","hidden","containerWidth","inner","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","allowMultiple","clipHeight","clipWidth","SVG_MASK","SVGMaskUniqueId","createImageOverlayView","fpAPI","mask","querySelector","url","URL","location","href","replace","hash","classList","add","BitmapWorker","self","onmessage","e","createImageBitmap","data","message","postMessage","ColorMatrixWorker","imageData","matrix","colorMatrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","r","g","buffer","getImageSize","cb","Image","naturalWidth","naturalHeight","transforms","fixImageOrientation","ctx","orientation","transform","apply","createPreviewImage","canvas","createElement","getContext","drawImage","isBitmap","MAX_WIDTH","MAX_HEIGHT","calculateAverageColor","ceil","getImageData","averageColor","floor","cloneCanvas","cloneImageData","ImageData","createImageData","set","Uint8ClampedArray","loadImage","img","crossOrigin","onerror","createImageWrapperView","OverlayView","ImageView","createWorker","applyFilter","putImageData","worker","post","response","terminate","removeImageView","_destroy","shiftImage","images","shift","imageViewBin","pushImage","getMetadata","childViews","setTimeout","dispatch","didUpdateItemMetadata","action","change","_imageView","canCreateImageBitmap","userAgent","navigator","isFirefox","match","firefoxVersion","parseInt","didCreatePreviewContainer","fileURL","createObjectURL","drawPreview","loadPreviewFallback","previewImageLoaded","revokeObjectURL","exif","pixelDensityFactor","devicePixelRatio","zoomFactor","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","setMetadata","close","overlayShadow","imageBitmap","didDrawPreview","restoreOverlay","_ref9","overlayError","overlaySuccess","didThrowError","_ref10","didCompleteProcessing","_ref11","_ref12","destroy","_ref13","_ref14","createRoute","DID_IMAGE_PREVIEW_DRAW","DID_IMAGE_PREVIEW_CONTAINER_CREATE","DID_FINISH_CALCULATE_PREVIEWSIZE","DID_UPDATE_ITEM_METADATA","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_INVALID","DID_COMPLETE_ITEM_PROCESSING","DID_START_ITEM_PROCESSING","DID_REVERT_ITEM_PROCESSING","_ref15","viewsToRemove","isFile","imagePreviewView","viewAPI","is","view","didLoadItem","archived","supportsCreateImageBitmap","maxPreviewFileSize","imagePreview","queue","rescaleItem","itemPanelAspectRatio","fixedHeight","_root$ref","previewAspectRatio","previewHeightMax","itemWidth","previewHeight","didResizeView","shouldRescale","didCalculatePreviewSize","shouldDrawPreview","registerWriter","DID_RESIZE_ROOT","DID_STOP_RESIZE","DID_LOAD_ITEM","DID_IMAGE_PREVIEW_CALCULATE_SIZE","requestAnimationFrame","allowImagePreview","imagePreviewFilterItem","imagePreviewHeight","INT","imagePreviewMinHeight","imagePreviewMaxHeight","imagePreviewMaxFileSize","imagePreviewZoomFactor","imagePreviewUpscale","imagePreviewMaxInstantPreviewFileSize","imagePreviewTransparencyIndicator","imagePreviewCalculateAverageImageColor","imagePreviewMarkupShow","imagePreviewMarkupFilter"],"sourceRoot":""}