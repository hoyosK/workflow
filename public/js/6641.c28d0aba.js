"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[6641],{7758:function(e,l,a){a.d(l,{Z:function(){return F}});var s=a(3396);const o=(0,s._)("strong",null,"Vue Select",-1),t=(0,s._)("small",null,"Default",-1),n=(0,s._)("option",null,"Open this select menu",-1),i=(0,s._)("option",{value:"1"},"One",-1),u=(0,s._)("option",{value:"2"},"Two",-1),d=(0,s._)("option",{value:"3"},"Three",-1),c=(0,s._)("strong",null,"Vue Select",-1),r=(0,s._)("small",null,"Sizing",-1),m=(0,s._)("p",{class:"text-medium-emphasis small"}," You may also choose from small and large custom selects to match our similarly sized text inputs. ",-1),p=(0,s._)("option",null,"Open this select menu",-1),_=(0,s._)("option",{value:"1"},"One",-1),b=(0,s._)("option",{value:"2"},"Two",-1),g=(0,s._)("option",{value:"3"},"Three",-1),f=(0,s._)("option",null,"Open this select menu",-1),v=(0,s._)("option",{value:"1"},"One",-1),h=(0,s._)("option",{value:"2"},"Two",-1),w=(0,s._)("option",{value:"3"},"Three",-1),x=(0,s._)("p",{class:"text-medium-emphasis small"},[(0,s.Uk)(" The "),(0,s._)("code",null,"multiple"),(0,s.Uk)(" attribute is also supported: ")],-1),j=(0,s._)("option",null,"Open this select menu",-1),y=(0,s._)("option",{value:"1"},"One",-1),W=(0,s._)("option",{value:"2"},"Two",-1),V=(0,s._)("option",{value:"3"},"Three",-1),k=(0,s._)("p",{class:"text-medium-emphasis small"},[(0,s.Uk)(" As is the "),(0,s._)("code",null,"html-size"),(0,s.Uk)(" property: ")],-1),C=(0,s._)("option",null,"Open this select menu",-1),O=(0,s._)("option",{value:"1"},"One",-1),T=(0,s._)("option",{value:"2"},"Two",-1),U=(0,s._)("option",{value:"3"},"Three",-1),Z=(0,s._)("strong",null,"Vue Select",-1),S=(0,s._)("small",null,"Disabled",-1),z=(0,s._)("p",{class:"text-medium-emphasis small"},[(0,s.Uk)(" Add the "),(0,s._)("code",null,"disabled"),(0,s.Uk)(" boolean attribute on a select to give it a grayed out appearance and remove pointer events. ")],-1),D=(0,s._)("option",null,"Open this select menu",-1),A=(0,s._)("option",{value:"1"},"One",-1),E=(0,s._)("option",{value:"2"},"Two",-1),q=(0,s._)("option",{value:"3"},"Three",-1);function G(e,l,a,G,P,M){const R=(0,s.up)("CCardHeader"),F=(0,s.up)("CFormSelect"),$=(0,s.up)("DocsExample"),B=(0,s.up)("CCardBody"),H=(0,s.up)("CCard"),I=(0,s.up)("CCol"),K=(0,s.up)("CRow");return(0,s.wg)(),(0,s.j4)(K,null,{default:(0,s.w5)((()=>[(0,s.Wm)(I,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[o,(0,s.Uk)(),t])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,{href:"forms/select.html"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{"aria-label":"Default select example"},{default:(0,s.w5)((()=>[n,i,u,d])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(I,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[c,(0,s.Uk)(),r])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[m,(0,s.Wm)($,{href:"forms/select.html#sizing"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{size:"lg",class:"mb-3","aria-label":"Large select example"},{default:(0,s.w5)((()=>[p,_,b,g])),_:1}),(0,s.Wm)(F,{size:"sm",class:"mb-3","aria-label":"Small select example"},{default:(0,s.w5)((()=>[f,v,h,w])),_:1})])),_:1}),x,(0,s.Wm)($,{href:"forms/select.html#sizing"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{size:"lg",multiple:"","aria-label":"Multiple select example"},{default:(0,s.w5)((()=>[j,y,W,V])),_:1})])),_:1}),k,(0,s.Wm)($,{href:"forms/select.html#sizing"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{size:"lg",multiple:"","aria-label":"Multiple select example"},{default:(0,s.w5)((()=>[C,O,T,U])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(I,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[Z,(0,s.Uk)(),S])),_:1}),(0,s.Wm)(B,null,{default:(0,s.w5)((()=>[z,(0,s.Wm)($,{href:"forms/select.html#disabled"},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{"aria-label":"Disabled select example",disabled:""},{default:(0,s.w5)((()=>[D,A,E,q])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}var P={name:"Select"},M=a(89);const R=(0,M.Z)(P,[["render",G]]);var F=R},6641:function(e,l,a){a.r(l),a.d(l,{default:function(){return ce}});a(7658);var s=a(3396),o=a(9242);const t=(0,s._)("strong",null,"Editar descuento",-1),n=(0,s._)("h5",null,"Datos generales",-1),i=(0,s._)("hr",null,null,-1),u={class:"row"},d={class:"col-12 col-sm-4"},c={class:"mb-3"},r=(0,s._)("label",{class:"form-label"},"Nombre",-1),m={key:0,class:"col-12 col-sm-4"},p={class:"mb-3"},_=(0,s._)("label",{class:"form-label"},"Monto",-1),b={key:1,class:"col-12 col-sm-4"},g={class:"mb-3"},f=(0,s._)("label",{class:"form-label"},"Valor mínimo",-1),v={key:2,class:"col-12 col-sm-4"},h={class:"mb-3"},w=(0,s._)("label",{class:"form-label"},"Valor máximo",-1),x={class:"col-12 col-sm-4"},j={class:"mb-3"},y=(0,s._)("label",{class:"form-label"},"Tipo",-1),W=(0,s._)("option",{value:"p"},"%",-1),V=[W],k={class:"col-12 col-sm-4"},C={class:"mb-3"},O=(0,s._)("label",{class:"form-label"},"Flujo",-1),T={class:"col-12 col-sm-4"},U={class:"mb-3"},Z=(0,s._)("label",{class:"form-label"},"Estado",-1),S=(0,s._)("option",{value:"1"},"Activo",-1),z=(0,s._)("option",{value:"0"},"Desactivado",-1),D=[S,z],A={class:"row"},E=(0,s._)("h6",{class:"text-primary"},"Configuración de visibilidad",-1),q={class:"row"},G={class:"col-12 col-sm-4"},P={class:"mb-3"},M=(0,s._)("span",null,"Selecciona el canal de usuarios",-1),R={class:"col-12 col-sm-4"},F={class:"mb-3"},$=(0,s._)("span",null,"Selecciona los distribuidores",-1),B={class:"col-12 col-sm-4"},H={class:"mb-3"},I=(0,s._)("span",null,"Selecciona los roles",-1),K={class:"col-12 col-sm-4"},L={class:"mb-3"},N=(0,s._)("span",null,"Selecciona los usuarios",-1),Y=(0,s._)("div",{class:"col-12"},[(0,s._)("div",{class:"text-muted"}," * Atención, si selecciona accesos se sobreescribirán en cascada Canales > Grupos > Roles ")],-1),J={class:"col-12 mt-4"},Q={class:"mb-3"},X=(0,s._)("span",null,"Productos",-1),ee=(0,s._)("div",{class:"text-muted"}," * Atención, si no configura ningún producto, el descuento será global (solo tomará en cuenta permisos por usuario). ",-1),le={class:"mt-4 text-end"};function ae(e,l,a,W,S,z){const ae=(0,s.up)("CCardHeader"),se=(0,s.up)("multiselect"),oe=(0,s.up)("CCardBody"),te=(0,s.up)("CCard"),ne=(0,s.up)("CCol"),ie=(0,s.up)("CRow");return(0,s.wg)(),(0,s.j4)(ie,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ne,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)(te,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(ae,null,{default:(0,s.w5)((()=>[t])),_:1}),(0,s.Wm)(oe,null,{default:(0,s.w5)((()=>[n,i,(0,s._)("div",u,[(0,s._)("div",d,[(0,s._)("div",c,[r,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"Escribe aquí","onUpdate:modelValue":l[0]||(l[0]=e=>S.nombre=e)},null,512),[[o.nr,S.nombre]])])]),"q"===S.tipo?((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("div",p,[_,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",placeholder:"Escribe aquí","onUpdate:modelValue":l[1]||(l[1]=e=>S.monto=e)},null,512),[[o.nr,S.monto]])])])):(0,s.kq)("",!0),"p"===S.tipo?((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",g,[f,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",placeholder:"Escribe aquí","onUpdate:modelValue":l[2]||(l[2]=e=>S.valormin=e),disabled:!0,readonly:!0},null,512),[[o.nr,S.valormin]])])])):(0,s.kq)("",!0),"p"===S.tipo?((0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",h,[w,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",placeholder:"Escribe aquí","onUpdate:modelValue":l[3]||(l[3]=e=>S.valormax=e)},null,512),[[o.nr,S.valormax]])])])):(0,s.kq)("",!0),(0,s._)("div",x,[(0,s._)("div",j,[y,(0,s.wy)((0,s._)("select",{class:"form-control","onUpdate:modelValue":l[4]||(l[4]=e=>S.tipo=e)},V,512),[[o.bM,S.tipo]])])]),(0,s._)("div",k,[(0,s._)("div",C,[O,(0,s._)("div",null,[(0,s.Wm)(se,{modelValue:S.flujos,"onUpdate:modelValue":l[5]||(l[5]=e=>S.flujos=e),options:S.flujosOptions,mode:"tags",searchable:!0,onSelect:e.getCampos},null,8,["modelValue","options","onSelect"])])])]),(0,s._)("div",T,[(0,s._)("div",U,[Z,(0,s.wy)((0,s._)("select",{class:"form-control","onUpdate:modelValue":l[6]||(l[6]=e=>S.activo=e)},D,512),[[o.bM,S.activo]])])])]),(0,s._)("div",A,[E,(0,s._)("div",q,[(0,s._)("div",G,[(0,s._)("div",P,[M,(0,s.Wm)(se,{modelValue:S.canales_assign,"onUpdate:modelValue":l[7]||(l[7]=e=>S.canales_assign=e),options:S.canales,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),(0,s._)("div",R,[(0,s._)("div",F,[$,(0,s.Wm)(se,{modelValue:S.grupos_assign,"onUpdate:modelValue":l[8]||(l[8]=e=>S.grupos_assign=e),options:S.grupos,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),(0,s._)("div",B,[(0,s._)("div",H,[I,(0,s.Wm)(se,{modelValue:S.roles_assign,"onUpdate:modelValue":l[9]||(l[9]=e=>S.roles_assign=e),options:S.roles,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),(0,s._)("div",K,[(0,s._)("div",L,[N,(0,s.Wm)(se,{modelValue:S.users_assign,"onUpdate:modelValue":l[10]||(l[10]=e=>S.users_assign=e),options:S.users,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),Y,(0,s._)("div",J,[(0,s._)("div",Q,[X,(0,s.Wm)(se,{modelValue:S.productos_assign,"onUpdate:modelValue":l[11]||(l[11]=e=>S.productos_assign=e),options:S.productos,mode:"tags",searchable:!0},null,8,["modelValue","options"]),ee])])])]),(0,s._)("div",null,[(0,s._)("div",le,[(0,s._)("button",{onClick:l[12]||(l[12]=l=>e.$router.push("/admin/descuentos")),class:"btn btn-danger me-4"},"Cancelar"),(0,s._)("button",{onClick:l[13]||(l[13]=(...e)=>z.guardar&&z.guardar(...e)),class:"btn btn-primary"},"Guardar")])])])),_:1})])),_:1})])),_:1})])),_:1})}var se=a(4768),oe=a(7091),te=a(7758),ne=a(3453),ie={name:"Tables",components:{Select:te.Z,Multiselect:oe.Z,Vue3TagsInput:ne.Z},data(){return{id:0,nombre:"",activo:1,monto:0,valormin:0,valormax:0,tipo:"p",producto:0,flujos:[],flujosOptions:[],roles:[],users:[],grupos:[],canales:[],productos:[],apiKey:"n8ab72lgcjz7weqad287mk9pgjg0acg88z7xzhdf0y0hc9zn",canales_assign:[],grupos_assign:[],users_assign:[],roles_assign:[],productos_assign:[]}},mounted(){this.id="undefined"!==typeof this.$route.params.id?parseInt(this.$route.params.id):0;const e=this;e.getRoles(),e.getCanales(),e.getGrupos(),e.getUsers(),e.getFlujos(),e.getProductos()},methods:{getData(){const e=this;se.Z.doAjax("POST","descuentos/get",{id:e.id},(function(l){e.id=l.data.id,e.activo=l.data.activo,e.nombre=l.data.nombre,e.monto=l.data.monto,e.tipo=l.data.tipo,e.valormin=l.data.valormin,e.valormax=l.data.valormax,e.flujos=[],Object.keys(l.data.c.p).map((function(a,s){e.flujos.push(l.data.c.p[a])})),e.roles_assign=l?.data?.c?.visibilidad?.roles,e.users_assign=l?.data?.c?.visibilidad?.users,e.grupos_assign=l?.data?.c?.visibilidad?.grupos,e.canales_assign=l?.data?.c?.visibilidad?.canales,e.productos_assign=l?.data?.c?.visibilidad?.productos}))},getFlujos(){const e=this;se.Z.doAjax("GET","descuentos/get-flujos",{},(function(l){e.flujosOptions=[],Object.keys(l.data).map((function(a,s){e.flujosOptions.push({value:l.data[a].id,label:l.data[a].nombreProducto})})),e.getData()}))},getProductos(){const e=this;se.Z.doAjax("POST","admin/catalogo/load",{slug:"productos",opt:"get"},(function(l){Object.keys(l.data).map((function(a,s){e.productos.push({value:l.data[a].id,label:"("+l.data[a].codigoProducto+") "+l.data[a].descripcion})}))}),(function(e){se.Z.alert(e.msg,"danger")}))},guardar(){const e=this;let l=!1;se.Z.isEmpty(this.nombre)&&(se.Z.alert("Debe ingresar un nombre de usuario","danger"),l=!0),l||se.Z.doAjax("POST","descuentos/save",{id:e.id,nombre:e.nombre,activo:e.activo,flujos:e.flujos,productos:e.productos,tipo:e.tipo,monto:e.monto,valormin:e.valormin,valormax:e.valormax,visibilidad:{roles:e.roles_assign,users:e.users_assign,grupos:e.grupos_assign,canales:e.canales_assign,productos:e.productos_assign}},(function(l){se.Z.alert(l.msg,"success"),0===e.id&&(e.id=l.data.id,e.$router.push("/admin/descuentos/"+l.data.id)),e.getData()}),(function(e){se.Z.alert(e.msg,"danger")}))},getUsers(){const e=this;se.Z.doAjax("GET","users/list",{},(function(l){Object.keys(l.data).map((function(a,s){e.users.push({value:l.data[a].id,label:l.data[a].name})}))}),(function(e){}))},getRoles(){const e=this;se.Z.doAjax("GET","users/role/list",{},(function(l){Object.keys(l.data).map((function(a,s){e.roles.push({value:l.data[a].id,label:l.data[a].name})}))}),(function(e){}))},getGrupos(){const e=this;se.Z.doAjax("GET","users/grupo/list",{},(function(l){Object.keys(l.data).map((function(a,s){e.grupos.push({value:l.data[a].id,label:l.data[a].nombre})}))}),(function(e){}))},getCanales(){const e=this;se.Z.doAjax("GET","users/canal/list",{},(function(l){Object.keys(l.data).map((function(a,s){e.canales.push({value:l.data[a].id,label:l.data[a].nombre})}))}),(function(e){}))}}},ue=a(89);const de=(0,ue.Z)(ie,[["render",ae]]);var ce=de}}]);
//# sourceMappingURL=6641.c28d0aba.js.map