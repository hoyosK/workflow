"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[1465],{5536:function(e,a,o){o.d(a,{Z:function(){return r}});var t=o(3396),i=o(7139);function s(e,a,o,s,l,n){const c=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(c,{type:"primary",class:"form__button"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(o.currentField.buttonText),1)])),_:1})])}var l={name:"Button",props:["currentField"]},n=o(89);const c=(0,n.Z)(l,[["render",s]]);var r=c},1465:function(e,a,o){o.r(a),o.d(a,{default:function(){return Ce}});var t=o(3396),i=o(7139),s=o(9242);const l=(0,t._)("i",{class:"fas fa-sync me-2"},null,-1),n=(0,t._)("i",{class:"fas fa-plus me-2"},null,-1),c={class:"mb-3"},r=(0,t._)("label",{for:"password",class:"form-label"},"Buscar por",-1),d={class:"row"},u={class:"col-3"},g=["value"],p={class:"col-3"},h={class:"text-center"},m=["onClick"],v=["onClick"],C=(0,t._)("i",{class:"fas fa-sync me-2"},null,-1),b={class:"mt-4"},x=(0,t._)("h2",null,"Log de sincronización",-1),f=(0,t._)("small",null,"Este log está activo únicamente para marcas y líneas",-1),_={class:"globalModalContainer position-relative"},w=(0,t._)("i",{class:"fas fa-times-circle"},null,-1),O=[w],y={class:"mt-4"},D={class:"row"},T={class:"col-12 col-sm-4 mt-3"},S={key:0},k=["for"],Z=["for"],z=["for"],V=["for"],A=["for"],j=["name","onUpdate:modelValue","id"],N=["for"],U=["name","onUpdate:modelValue","id"],E=["for"],M={key:1},P=["onUpdate:modelValue"],R=["value"],q={key:2},G=["onUpdate:modelValue"],I=(0,t._)("option",{value:"0"},"Sin grupo",-1),W=["value"],B={key:3},F=["onUpdate:modelValue"],H={key:0,class:"row mt-3"},L={class:"col-12"},Y=(0,t._)("label",{class:"fw-bold"},"Accesos de producto",-1),K={class:"row"},$={class:"col-12 col-sm-4"},J={class:"mb-3"},Q=(0,t._)("span",null,"Selecciona el canal de usuarios",-1),X={class:"col-12 col-sm-4"},ee={class:"mb-3"},ae=(0,t._)("span",null,"Selecciona los distribuidores",-1),oe={class:"col-12 col-sm-4"},te={class:"mb-3"},ie=(0,t._)("span",null,"Selecciona los roles",-1),se=(0,t._)("div",{class:"col-12"},[(0,t._)("div",{class:"text-muted"}," * Atención, si selecciona accesos se sobreescribirán en cascada Canales > Grupos > Roles ")],-1),le=(0,t._)("div",{class:"text-muted mt-4"}," El bloqueo de sincronización impedirá que se sobreescriba el contenido al sincronizar. ",-1),ne=(0,t._)("div",{class:"mt-4 text-danger"}," Atención, editar el catálogo puede provocar errores al enviar información hacia AS400, por favor, asegúrese que los datos que introduzca son son correctos. ",-1),ce={class:"mt-3 text-end"};function re(e,a,o,w,re,de){const ue=(0,t.up)("CCardHeader"),ge=(0,t.up)("EasyDataTable"),pe=(0,t.up)("CCardBody"),he=(0,t.up)("multiselect"),me=(0,t.up)("CCard"),ve=(0,t.up)("CCol"),Ce=(0,t.up)("CRow");return(0,t.wg)(),(0,t.j4)(Ce,null,{default:(0,t.w5)((()=>[(0,t.Wm)(ve,{xs:12},{default:(0,t.w5)((()=>[(0,t.Wm)(me,{class:"mb-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(ue,null,{default:(0,t.w5)((()=>[(0,t._)("strong",null,"Edición de "+(0,i.zw)(re.nombreCatalogo),1),(0,t._)("button",{onClick:a[0]||(a[0]=(...e)=>de.sync&&de.sync(...e)),class:"btn btn-primary float-end me-2"},[l,(0,t.Uk)("Sincronizar con AS400")]),(0,t._)("button",{onClick:a[1]||(a[1]=(...e)=>de.createNew&&de.createNew(...e)),class:"btn btn-primary float-end me-2"},[n,(0,t.Uk)("Crear nuevo")])])),_:1}),(0,t.Wm)(pe,null,{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("div",c,[r,(0,t._)("div",d,[(0,t._)("div",u,[(0,t.wy)((0,t._)("select",{class:"form-select","onUpdate:modelValue":a[2]||(a[2]=e=>re.typeSearch=e)},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(re.headers,(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.value},(0,i.zw)(e.text),9,g)))),256))],512),[[s.bM,re.typeSearch]])]),(0,t._)("div",p,[(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>re.searchValue=e),class:"form-control",placeholder:"Escribe aquí tu búsqueda"},null,512),[[s.nr,re.searchValue]])])])])]),(0,t.Wm)(ge,{headers:re.headers,items:re.items,"search-field":re.typeSearch,"search-value":re.searchValue,alternating:""},{"item-operation":(0,t.w5)((e=>[(0,t._)("div",h,[(0,t._)("i",{class:"fas fa-pencil icon me-3",onClick:a=>de.editItem(e)},null,8,m),"marcas"===re.slugCatalogo?((0,t.wg)(),(0,t.iD)("span",{key:0,class:"cursor-pointer",onClick:a=>de.sync("lineas",e)},[C,(0,t.Uk)("Líneas")],8,v)):(0,t.kq)("",!0)])])),_:1},8,["headers","items","search-field","search-value"]),(0,t._)("div",b,[x,f,(0,t.wy)((0,t._)("textarea",{"onUpdate:modelValue":a[4]||(a[4]=e=>re.logSync=e),class:"form-control w-100",style:{"min-height":"300px"}},null,512),[[s.nr,re.logSync]])])])),_:1}),re.showConfig?((0,t.wg)(),(0,t.iD)("div",{key:0,onClose:a[10]||(a[10]=()=>{re.showConfig=!1}),class:"globalModal"},[(0,t._)("div",_,[(0,t._)("div",{onClick:a[5]||(a[5]=e=>re.showConfig=!1),class:"globalModalClose mt-3",style:{position:"absolute"}},O),(0,t._)("div",null,[(0,t._)("div",null,[(0,t._)("strong",null,"Edición de "+(0,i.zw)(re.nombreCatalogo),1),(0,t._)("div",y,[(0,t._)("div",D,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(re.campos,((e,a)=>((0,t.wg)(),(0,t.iD)("div",T,["access"!==a?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[["activo","flock","isRoja","asegurable","noAsegurable","altoRiesgo","tieneDescuento","rc"].includes(e.campo)?((0,t.wg)(),(0,t.iD)("div",S,["flock"===e.campo?((0,t.wg)(),(0,t.iD)("label",{key:0,for:e.campo},"Bloqueado en sincronización",8,k)):"isRoja"===e.campo?((0,t.wg)(),(0,t.iD)("label",{key:1,for:e.campo},"¿Es zona roja?",8,Z)):"tieneDescuento"===e.campo?((0,t.wg)(),(0,t.iD)("label",{key:2,for:e.campo},"¿Soporta descuento?",8,z)):"rc"===e.campo?((0,t.wg)(),(0,t.iD)("label",{key:3,for:e.campo},"Es RC",8,V)):((0,t.wg)(),(0,t.iD)("label",{key:4,for:e.campo},(0,i.zw)(e.campo),9,A)),(0,t._)("div",null,[(0,t.wy)((0,t._)("input",{name:e.campo,type:"radio","onUpdate:modelValue":a=>e.valor=a,id:e.campo+"_si",value:"1"},null,8,j),[[s.G2,e.valor]]),(0,t._)("label",{for:e.campo+"_si",class:"me-4 ms-1"},"Si",8,N),(0,t.wy)((0,t._)("input",{name:e.campo,type:"radio","onUpdate:modelValue":a=>e.valor=a,id:e.campo+"_no",value:"0"},null,8,U),[[s.G2,e.valor]]),(0,t._)("label",{for:e.campo+"_no",class:"me-2 ms-1"},"No",8,E)])])):["zonaEmision"].includes(e.campo)?((0,t.wg)(),(0,t.iD)("div",M,[(0,t._)("label",null,(0,i.zw)(e.campo),1),(0,t.wy)((0,t._)("select",{class:"form-select","onUpdate:modelValue":a=>e.valor=a},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(re.catalogosOutSide["zona_emision"],(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.value},(0,i.zw)(e.label),9,R)))),256))],8,P),[[s.bM,e.valor]])])):["grupo"].includes(e.campo)?((0,t.wg)(),(0,t.iD)("div",q,[(0,t._)("label",null,(0,i.zw)(e.campo),1),(0,t.wy)((0,t._)("select",{class:"form-select","onUpdate:modelValue":a=>e.valor=a},[I,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(re.catalogosOutSide["grupo_coberturas"],(e=>((0,t.wg)(),(0,t.iD)("option",{value:e.id},(0,i.zw)(e.label),9,W)))),256))],8,G),[[s.bM,e.valor]])])):((0,t.wg)(),(0,t.iD)("div",B,[(0,t._)("label",null,(0,i.zw)(e.campo),1),(0,t._)("div",null,[(0,t.wy)((0,t._)("input",{type:"text","onUpdate:modelValue":a=>e.valor=a,class:"form-control"},null,8,F),[[s.nr,e.valor]])])]))],64)):(0,t.kq)("",!0)])))),256))]),"productos"===re.slugCatalogo?((0,t.wg)(),(0,t.iD)("div",H,[(0,t._)("div",L,[Y,(0,t._)("div",K,[(0,t._)("div",$,[(0,t._)("div",J,[Q,(0,t.Wm)(he,{modelValue:re.access.canales_assign,"onUpdate:modelValue":a[6]||(a[6]=e=>re.access.canales_assign=e),options:re.canales,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),(0,t._)("div",X,[(0,t._)("div",ee,[ae,(0,t.Wm)(he,{modelValue:re.access.grupos_assign,"onUpdate:modelValue":a[7]||(a[7]=e=>re.access.grupos_assign=e),options:re.grupos,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),(0,t._)("div",oe,[(0,t._)("div",te,[ie,(0,t.Wm)(he,{modelValue:re.access.roles_assign,"onUpdate:modelValue":a[8]||(a[8]=e=>re.access.roles_assign=e),options:re.roles,mode:"tags",searchable:!0},null,8,["modelValue","options"])])]),se])])])):(0,t.kq)("",!0),le])]),ne,(0,t._)("div",ce,[(0,t._)("button",{onClick:a[9]||(a[9]=(...e)=>de.guardarModificacion&&de.guardarModificacion(...e)),class:"btn btn-success"},"Guardar edición")])])])],32)):(0,t.kq)("",!0)])),_:1})])),_:1})])),_:1})}o(7658);var de=o(4768),ue=o(5536),ge=o(7091),pe=o(3453),he={name:"Tables",components:{Button:ue.Z,Multiselect:ge.Z,Vue3TagsInput:pe.Z},data(){return{urlOpt:"admin/catalogo",showConfig:!1,idRow:0,slugCatalogo:"",nombreCatalogo:"",typeSearch:"nombre",searchValue:"",headers:[{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}],items:[],campos:{},agentesOptions:[],agentes:{},tarifas:{},tarifaSelected:!1,tarifasOptions:[],coberturas:{},coberturaSelected:!1,coberturasEnTarifa:[],productoTarifas:[],catalogosOutSide:{zonaEmision:[]},canales:[],grupos:[],roles:[],access:{canales_assign:[],grupos_assign:[],roles_assign:[]},logSync:""}},mounted(){this.slugCatalogo="undefined"!==typeof this.$route.params.id?this.$route.params.id:0,this.loadCatalogo()},methods:{loadCatalogo(){this.showConfig=!1,"marcas"===this.slugCatalogo?(this.nombreCatalogo="Marcas",this.headers=[{text:"Nombre de marca",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"lineas"===this.slugCatalogo?(this.nombreCatalogo="Líneas",this.headers=[{text:"Nombre de línea",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"lineas_no_asegurables"===this.slugCatalogo?(this.nombreCatalogo="Líneas no asegurables",this.headers=[{text:"Nombre de línea",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_linea"===this.slugCatalogo?(this.nombreCatalogo="Tipo de línea",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_placa"===this.slugCatalogo?(this.nombreCatalogo="Tipo de placa",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_vehiculo"===this.slugCatalogo?(this.nombreCatalogo="Tipo de vehículo",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_cuenta_tarjeta"===this.slugCatalogo?(this.nombreCatalogo="Tipo de cuenta o tarjeta",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_licencia"===this.slugCatalogo?(this.nombreCatalogo="Tipo de licencia",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_movimiento"===this.slugCatalogo||"tipo_movimiento"===this.slugCatalogo?(this.nombreCatalogo="Tipo de movimiento",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tipo_documento"===this.slugCatalogo?(this.nombreCatalogo="Tipo de documento",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"tarifas"===this.slugCatalogo?(this.nombreCatalogo="Tarifas",this.headers=[{text:"Id tarifa",value:"idTarifa"},{text:"Clasificación",value:"clasificacion"},{text:"Descripcion",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_tarifas"===this.slugCatalogo?(this.nombreCatalogo="Tipo de tarifas",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"codigo_agente"===this.slugCatalogo?(this.nombreCatalogo="Agentes",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"agente_tarifas"===this.slugCatalogo?(this.nombreCatalogo="Tarifas de agente",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"productos"===this.slugCatalogo?(this.nombreCatalogo="Productos",this.headers=[{text:"Id de producto",value:"codigoProducto"},{text:"Nombre",value:"nombre"},{text:"Moneda",value:"idMoneda"},{text:"Descripción",value:"descripcion"},{text:"Estado",value:"estado"},{text:"Activo",value:"activo"},{text:"Rango desde",value:"rangoPolizaDesde"},{text:"Rango hasta",value:"rangoPolizaHasta"},{text:"RC",value:"rc"},{text:"Operación",value:"operation",width:150}]):"tipo_productos"===this.slugCatalogo?(this.nombreCatalogo="Tipo de productos",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"beneficiarios"===this.slugCatalogo?(this.nombreCatalogo="Beneficiarios",this.headers=[{text:"Código",value:"codigo"},{text:"Nombre",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"formas_pago"===this.slugCatalogo?(this.nombreCatalogo="Formas de pago",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"estado_civil"===this.slugCatalogo?(this.nombreCatalogo="Estado civil",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"profesion"===this.slugCatalogo?(this.nombreCatalogo="Profesión",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"zona"===this.slugCatalogo?(this.nombreCatalogo="Zonas",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"medio_cobro"===this.slugCatalogo?(this.nombreCatalogo="Medio de cobro",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"nombre"},{text:"Operación",value:"operation",width:150}]):"clase_tarjeta"===this.slugCatalogo?(this.nombreCatalogo="Clase Tarjeta",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_cuenta_bancaria"===this.slugCatalogo?(this.nombreCatalogo="Tipo Cuenta Bancaria",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"banco_emisor"===this.slugCatalogo?(this.nombreCatalogo="Banco Emisor",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"sexo"===this.slugCatalogo?(this.nombreCatalogo="Sexo",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"zona_emision"===this.slugCatalogo?(this.nombreCatalogo="Zona emisión",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"nacionalidad"===this.slugCatalogo?(this.nombreCatalogo="Nacionalidad",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_cliente"===this.slugCatalogo?(this.nombreCatalogo="Tipo cliente",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_sociedad"===this.slugCatalogo?(this.nombreCatalogo="Tipo sociedad",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"actividad_economica"===this.slugCatalogo?(this.nombreCatalogo="Actividad Economica",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_uso"===this.slugCatalogo?(this.nombreCatalogo="Tipo uso",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_combustible"===this.slugCatalogo?(this.nombreCatalogo="Tipo combustible",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_tecnologia"===this.slugCatalogo?(this.nombreCatalogo="Tipo tecnología",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_cartera"===this.slugCatalogo?(this.nombreCatalogo="Tipo cartera",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"subtipo_movimiento"===this.slugCatalogo?(this.nombreCatalogo="Subtipo movimiento",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"departamento"===this.slugCatalogo?(this.nombreCatalogo="Departamento",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"municipio"===this.slugCatalogo?(this.nombreCatalogo="Municipio",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"codigo_alarma"===this.slugCatalogo?(this.nombreCatalogo="Código alarma",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"promociones"===this.slugCatalogo?(this.nombreCatalogo="Promociones",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_asignacion"===this.slugCatalogo?(this.nombreCatalogo="Tipo Asignación",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"tipo_usuario"===this.slugCatalogo?(this.nombreCatalogo="Tipo Usuario",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"seleccion"===this.slugCatalogo?(this.nombreCatalogo="Selección",this.headers=[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Operación",value:"operation",width:150}]):"linea_por_intermediario"===this.slugCatalogo&&(this.nombreCatalogo="Línea por intermediario",this.headers=[{text:"Código de intermediario",value:"codigoIntermediario"},{text:"Código zona de emisión",value:"codigoZonaEmision"},{text:"Operación",value:"operation",width:150}]);const e=this;de.Z.doAjax("POST","admin/catalogo/load",{slug:e.slugCatalogo,opt:"get"},(function(a){e.items=de.Z.prepareForTable(a.data),"productos"===e.slugCatalogo&&console.log(a.data)}),(function(e){de.Z.alert(e.msg,"danger")}))},deleteItem(e){const a=this;de.Z.confirm("Se desactivará este usuario, ¿desea continuar?",(function(){de.Z.doAjax("POST","admin/canales/delete",{id:e.id},(function(e){de.Z.alert(e.msg,"success"),a.getItems()}),(function(e){de.Z.alert(e.msg,"danger")}))}))},editItem(e){const a=this;this.showConfig=!0,this.idRow=e.id,this.getFields(e),"productos"===this.slugCatalogo&&(this.getCanales(),this.getGrupos(),this.getRoles(),setTimeout((function(){a.getAccess(e)}),500)),["productos","coberturas"].includes(this.slugCatalogo)&&this.bringCatalogos()},sync(e,a){const o=this;de.Z.confirm("Se realizará una sincronización con AS400, esto puede demorar unos minutos, ¿desea continuar?",(function(){let t=o.slugCatalogo;"lineas"===e&&(t="lineas"),de.Z.doAjax("POST","admin/catalogo/load",{slug:t,opt:"sync",data:"undefined"!==typeof a&&"undefined"!==typeof a.id&&a.id},(function(e){o.loadCatalogo(),o.logSync=e.data,de.Z.alert(e.msg,"success")}),(function(e){de.Z.alert(e.msg,"danger")}))}))},createNew(){this.showConfig=!0,this.idRow=0,this.getFields(0),["productos","coberturas"].includes(this.slugCatalogo)&&this.bringCatalogos()},getFields(e){const a=this;de.Z.doAjax("POST","admin/catalogo/load-fields",{slug:a.slugCatalogo,id:e.id},(function(e){a.campos=e.data}),(function(e){de.Z.alert(e.msg,"danger")}))},getAccess(e){const a=this;de.Z.doAjax("POST","admin/catalogo/load-access",{slug:a.slugCatalogo,id:e.id},(function(e){a.access=e.data}),(function(e){de.Z.alert(e.msg,"danger")}))},guardarModificacion(){const e=this;de.Z.doAjax("POST","admin/catalogo/save-row",{slug:e.slugCatalogo,id:e.idRow,campos:e.campos,access:e.access},(function(a){e.loadCatalogo(),de.Z.alert(a.msg,"success")}),(function(e){de.Z.alert(e.msg,"danger")}))},loadCatalogosProductos(e){const a=this;de.Z.doAjax("POST","admin/catalogo/load",{slug:e,opt:"get"},(function(o){"codigo_agente"===e?a.agentes=o.data:"tarifas"===e&&(a.tarifas=o.data,a.tarifasOptions=[],Object.keys(o.data).map((function(e,t){a.tarifasOptions.push({value:o.data[e].id,label:o.data[e].descripcion})})))}),(function(e){de.Z.alert(e.msg,"danger")}))},asociarTarifa(e){const a=this;let o="";this.tarifasOptions.forEach((function(e){e.value===a.tarifaSelected&&(o=e.label)})),this.productoTarifas.push({tarifaId:a.tarifaSelected,desc:o}),a.tarifaSelected=0},bringCatalogos(){const e=this;de.Z.doAjax("POST","tareas/catalogos/bring",{catalogos:["zona_emision","grupo_coberturas"]},(function(a){e.catalogosOutSide=a.data}),(function(e){de.Z.alert(e.msg,"danger")}))},getRoles(){const e=this;de.Z.doAjax("GET","users/role/list",{},(function(a){e.roles=[],Object.keys(a.data).map((function(o,t){e.roles.push({value:a.data[o].id,label:a.data[o].name})}))}),(function(e){de.Z.alert(e.msg,"danger")}))},getGrupos(){const e=this;de.Z.doAjax("GET","users/grupo/list",{},(function(a){e.grupos=[],Object.keys(a.data).map((function(o,t){e.grupos.push({value:a.data[o].id,label:a.data[o].nombre})}))}),(function(e){de.Z.alert(e.msg,"danger")}))},getCanales(){const e=this;de.Z.doAjax("GET","users/canal/list",{},(function(a){e.canales=[],Object.keys(a.data).map((function(o,t){e.canales.push({value:a.data[o].id,label:a.data[o].nombre})}))}),(function(e){de.Z.alert(e.msg,"danger")}))}}},me=o(89);const ve=(0,me.Z)(he,[["render",re]]);var Ce=ve}}]);
//# sourceMappingURL=1465.1d7ee58e.js.map