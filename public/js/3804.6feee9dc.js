"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[3804],{3804:function(a,l,e){e.r(l),e.d(l,{default:function(){return se}});e(7658);var o=e(3396),t=e(7139),n=e(9242);const s={style:{overflow:"scroll",width:"100%",height:"65vh","padding-bottom":"2em"}},i={class:"ptcConfigTableTB table table-striped",style:{width:"max-content"}},r={class:"rowTitle"},d={class:"fw-bold"},u={class:"text-success m-0 p-0"},c=(0,o._)("i",{class:"fas fa-plus-circle mr-2"},null,-1),m=(0,o._)("div",{class:"mt-3"}," Cobertura ",-1),p=(0,o._)("td",{style:{height:"110px"}}," Condicionales ",-1),_=(0,o._)("td",null," Visibilidad condicional ",-1),b=(0,o._)("td",null," Visibilidad ",-1),g=(0,o._)("td",null," Criterio ",-1),f=(0,o._)("td",null," Moneda ",-1),v=(0,o._)("td",null," Tipo de numeración ",-1),w=(0,o._)("td",null," Valor de vehículo ",-1),C=(0,o._)("td",null," Incluye suma asegurada ",-1),y=(0,o._)("td",null," Mto. prima ",-1),h=(0,o._)("td",null," Mto. Deduc. Minimo ",-1),T=(0,o._)("td",null," Tasa Deduc. ",-1),V=(0,o._)("td",null," Suma asegurada ",-1),U=(0,o._)("td",null," Tipo ",-1),k=(0,o._)("td",null," Prima mínima ",-1),x={style:{width:"150px"}},S={class:"text-center"},D=["onClick"],A=(0,o._)("i",{class:"fas fa-minus-circle"},null,-1),M=[A],Z=["onUpdate:modelValue"],z=["value"],I=(0,o._)("div",{class:"text-center"},[(0,o._)("div",{style:{"font-size":"0.7em"}}," Valor tarifa ")],-1),O={class:"ptcConfigTableTBRow"},H={style:{"padding-left":"2em",position:"relative"}},P={style:{left:"10px",top:"15px",position:"absolute"}},E=["onClick"],j=(0,o._)("i",{class:"fas fa-minus-circle"},null,-1),N=[j],Y=["onUpdate:modelValue"],G=["value"],K=["onUpdate:modelValue"],q={class:"stickyHTitle"},R=["onUpdate:modelValue"],F={class:"stickyHTitle"},L=["onUpdate:modelValue"],B=(0,o._)("option",{value:"cobertura"},"Solo cobertura",-1),W=(0,o._)("option",{value:"monto"},"Cobertura y monto",-1),Q=(0,o._)("option",{value:"nada"},"Nada",-1),$=[B,W,Q],J={class:"stickyHTitle"},X=["onUpdate:modelValue"],aa=(0,o._)("option",{value:0},"Opcional",-1),la=(0,o._)("option",{value:1},"Obligatorio",-1),ea=[aa,la],oa={class:"stickyHTitle"},ta=["onUpdate:modelValue"],na=(0,o._)("option",{value:"Q"},"Q",-1),sa=(0,o._)("option",{value:"USD"},"USD",-1),ia=[na,sa],ra={class:"stickyHTitle"},da=["onUpdate:modelValue"],ua=(0,o._)("option",{value:"GEN"},"General",-1),ca=(0,o._)("option",{value:"ESP"},"Específico",-1),ma=[ua,ca],pa={class:"stickyHTitle"},_a=["onUpdate:modelValue"],ba=(0,o._)("option",{value:1},"Sí",-1),ga=(0,o._)("option",{value:0},"No",-1),fa=[ba,ga],va={class:"stickyHTitle"},wa=["onUpdate:modelValue"],Ca=(0,o._)("option",{value:1},"Sí",-1),ya=(0,o._)("option",{value:0},"No",-1),ha=[Ca,ya],Ta={class:"stickyHTitle"},Va=["onUpdate:modelValue"],Ua={class:"stickyHTitle"},ka=["onUpdate:modelValue"],xa={class:"stickyHTitle"},Sa=["onUpdate:modelValue"],Da={class:"stickyHTitle"},Aa=["onUpdate:modelValue"],Ma={class:"stickyHTitle"},Za=["onUpdate:modelValue"],za=(0,o._)("option",{value:"t"},"% Tasa",-1),Ia=(0,o._)("option",{value:"m"},"Monto",-1),Oa=(0,o._)("option",{value:"rt"},"Rango tasa",-1),Ha=[za,Ia,Oa],Pa={class:"stickyHTitle"},Ea=["onUpdate:modelValue"],ja={class:"stickyHTitle"},Na={class:"position-relative",style:{"padding-left":"20px"}},Ya=["onClick"],Ga=(0,o._)("i",{class:"fas fa-pencil"},null,-1),Ka=[Ga],qa=["onClose"],Ra={class:"globalModalContainer position-relative"},Fa=["onClick"],La=(0,o._)("i",{class:"fas fa-times-circle"},null,-1),Ba=[La],Wa=(0,o._)("strong",null,"Rangos",-1),Qa=(0,o._)("hr",null,null,-1),$a={class:"mt-4"},Ja={class:"row"},Xa={class:"col-12 col-sm-3"},al=(0,o._)("label",null,"Suma asegurada desde",-1),ll=["onUpdate:modelValue"],el={class:"col-12 col-sm-3"},ol=(0,o._)("label",null,"Suma asegurada hasta",-1),tl=["onUpdate:modelValue"],nl={class:"col-12 col-sm-3"},sl=(0,o._)("label",null,"Suma asegurada",-1),il=["onUpdate:modelValue"],rl={class:"col-12 col-sm-3"},dl=(0,o._)("label",null,"Tasa",-1),ul=["onUpdate:modelValue"],cl={class:"col-12 col-sm-3"},ml=(0,o._)("label",null,"Prima",-1),pl=["onUpdate:modelValue"],_l={class:"col-12 col-sm-3"},bl=(0,o._)("label",null,"Tasa deducible",-1),gl=["onUpdate:modelValue"],fl={class:"col-12 col-sm-3"},vl=(0,o._)("label",null,"Valor deducible",-1),wl=["onUpdate:modelValue"],Cl={class:"col-12 col-sm-3"},yl=(0,o._)("label",null,"Prima mínima",-1),hl=["onUpdate:modelValue"],Tl=["onClick"],Vl={class:"mt-3 text-end"},Ul=["onClick"],kl={class:"mt-5 text-end"},xl={class:"stickyHTitle"},Sl={class:"floatCol"},Dl={class:"text-success"},Al=(0,o._)("i",{class:"fas fa-plus-circle ms-2"},null,-1),Ml=(0,o._)("div",{class:"mt-3 text-end text-muted"}," La configuración se guarda automáticamente al realizar cambios* ",-1),Zl={class:"text-end mt-4"},zl=(0,o._)("div",null,[(0,o._)("h5",null,"Glosario de configuración"),(0,o._)("div",{style:{"font-size":"0.8em"}},[(0,o._)("div",null,[(0,o.Uk)(" Los condicionales permiten evaluar operaciones lógicas variar el comportamiento de una cobertura. "),(0,o._)("br"),(0,o._)("br"),(0,o._)("div",{class:"mb-2"},[(0,o._)("b",null,"Columna valor tarifa:"),(0,o.Uk)(" Permite configurar los valores asociados a una tarifa, esta columna se comporta distinto en función del tipo de tarifa (tasa o monto). "),(0,o._)("div",{class:"ps-3"},[(0,o._)("div",null,[(0,o._)("b",null,"En función de tasa:"),(0,o.Uk)(" Solo un único valor es permitido, este será %. ")]),(0,o._)("div",null,[(0,o._)("b",null,"En función de monto:"),(0,o.Uk)(" Permite ingresar uno o múltiples valores. "),(0,o._)("div",{class:"ps-3"},[(0,o._)("div",null,[(0,o._)("b",{class:"text-secondary"},"Monto único:"),(0,o.Uk)(" En caso la configuración sea monto único, no se mostrará selector de opciones al cliente y dicho monto será predeterminado. ")]),(0,o._)("div",null,[(0,o._)("b",{class:"text-secondary"},"Varios montos:"),(0,o.Uk)(' En caso existan varios montos, se mostrará un selector al usuario, el cual podrá elegir el monto deseado. Los montos tienen la siguiente estructura: "100-50". Siendo el primer número el monto a mostrar al cliente en cotizador, separado de un guión medio, el monto a cobrar por esa selección internamente. ')])])])])]),(0,o._)("div",null,[(0,o._)("b",null,"Columna condicionales:"),(0,o.Uk)(" Permite activar o desactivar la cobertura en función de su evaluación condicional. ")]),(0,o._)("div",null,[(0,o._)("b",null,"Columna visibilidad condicional:"),(0,o.Uk)(" Permite mostrar u ocultar una cobertura en función de su evaluación condicional, si una cobertura se oculta, seguirá estando activa. ")]),(0,o._)("div",{class:"mt-3"},[(0,o._)("b",{class:"text-muted"},"Operadores permitidos:"),(0,o._)("table",{class:"table table-striped mt-1"},[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null," Operador "),(0,o._)("th",null," Descripción "),(0,o._)("th",null," Ejemplo "),(0,o._)("th",{style:{"min-width":"200px"}}," Condicional ")])]),(0,o._)("tbody",null,[(0,o._)("tr",null,[(0,o._)("td",null," {{SA}} "),(0,o._)("td",null," Representa la suma asegurada en el cotizador "),(0,o._)("td",null," Si la suma asegurada es mayor que 0 "),(0,o._)("td",null," {{SA}} > 0 ")]),(0,o._)("tr",null,[(0,o._)("td",null," {{TC}} "),(0,o._)("td",null," Representa la tasa de una cobertura, si la cobertura no tiene tasa, este valor será cero. "),(0,o._)("td",null," Si la multiplicación de la suma asegurada por la tasa de la cobertura es mayor a 10. "),(0,o._)("td",null," {{SA}} * {{TC}} > 10 ")]),(0,o._)("tr",null,[(0,o._)("td",null," {{VC}} "),(0,o._)("td",null," Representa el valor fijo de una cobertura, este puede ser una selección (en caso de varias opciones) o un monto fijo. Si la cobertura no tiene un monto, este valor será cero. "),(0,o._)("td",null," Si el monto de cobertura más la suma asegurada es mayor a 50. "),(0,o._)("td",null," {{VC}} + {{SA}} > 50 ")]),(0,o._)("tr",null,[(0,o._)("td",null," && "),(0,o._)("td",null,' "Y" ó "AND", permite evaluar una expresión lógica, si todas se cumplen, el resultado será verdadero. '),(0,o._)("td",null," Si la suma asegurada es mayor que 0 Y es menor que 100. "),(0,o._)("td",null," {{SA}} > 0 && {{SA}} < 100 ")]),(0,o._)("tr",null,[(0,o._)("td",null," || "),(0,o._)("td",null,' "O" u "OR", permite evaluar una expresión lógica, si al menos una se cumplen, el resultado será verdadero. '),(0,o._)("td",null," Si la suma asegurada es mayor que 100 Ó el valor de cobertura es menor que 200. "),(0,o._)("td",null," {{SA}} > 100 || {{VC}} < 200 ")])])])])])])],-1),Il=(0,o._)("h3",null,"Validación AS400 (momentáneo)",-1),Ol=["onUpdate:modelValue"],Hl={class:"mb-4"},Pl=(0,o._)("hr",null,null,-1),El={class:"globalModalContainer position-relative"},jl=(0,o._)("i",{class:"fas fa-times-circle"},null,-1),Nl=[jl],Yl=(0,o._)("strong",null,"Cargar configuración desde otro producto",-1),Gl=(0,o._)("hr",null,null,-1),Kl={class:"row"},ql={class:"col-12 col-sm-6 mb-3"},Rl={class:"productCloneItem"},Fl={class:"row"},Ll={class:"col-9"},Bl={class:"col-3 text-end"},Wl=["onClick"];function Ql(a,l,e,A,j,B){const W=(0,o.up)("CCardHeader"),Q=(0,o.up)("vue3-tags-input"),aa=(0,o.up)("CCardBody"),la=(0,o.up)("CCard"),na=(0,o.up)("CCol"),sa=(0,o.up)("CRow");return(0,o.wg)(),(0,o.j4)(sa,null,{default:(0,o.w5)((()=>[(0,o.Wm)(na,{xs:12},{default:(0,o.w5)((()=>[(0,o.Wm)(la,{class:"mb-4"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o._)("strong",null,"Edición de productos: "+(0,t.zw)(j.loadFull.p),1),(0,o.Uk)(),(0,o._)("button",{class:"btn btn-primary btn-sm float-end",onClick:l[0]||(l[0]=(...a)=>B.loadCatalogoProductos&&B.loadCatalogoProductos(...a))},"Cargar configuración")])),_:1}),(0,o.Wm)(aa,null,{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("table",i,[(0,o._)("thead",r,[(0,o._)("tr",d,[(0,o._)("td",null,[(0,o._)("h6",u,[(0,o._)("span",{class:"cursor-pointer small",onClick:l[1]||(l[1]=(...a)=>B.newAddTarifa&&B.newAddTarifa(...a))},[c,(0,o.Uk)(" Agregar tarifa")])]),m]),p,_,b,g,f,v,w,C,y,h,T,V,U,k,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.newTarifas,(a=>((0,o.wg)(),(0,o.iD)("td",x,[(0,o._)("div",S,[(0,o._)("span",{class:"cursor-pointer small text-danger",onClick:l=>B.newDeleteTarifa(a.idTarifa)},M,8,D)]),(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.idTarifa=l},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.loadFull.cat.tarifas,(a=>((0,o.wg)(),(0,o.iD)("option",{value:a.id},(0,t.zw)(a.idTarifa)+" - "+(0,t.zw)(a.clasificacion),9,z)))),256))],8,Z),[[n.bM,a.idTarifa]]),I])))),256))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.newCoberturas,((a,e)=>((0,o.wg)(),(0,o.iD)("tr",O,[(0,o._)("td",H,[(0,o._)("div",P,[(0,o._)("div",{class:"cursor-pointer small text-danger",onClick:l=>B.deleteCobertura(a.id)},N,8,E)]),(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.idCobertura=l},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.loadFull.cat.cobertura,(a=>((0,o.wg)(),(0,o.iD)("option",{value:a.id},(0,t.zw)(a.codigo)+" - "+(0,t.zw)(a.nombre),9,G)))),256))],8,Y),[[n.bM,a.idCobertura]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-large",type:"text","onUpdate:modelValue":l=>a.condicionales=l},null,8,K),[[n.nr,a.condicionales]]),(0,o._)("div",q,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-large",type:"text","onUpdate:modelValue":l=>a.condicionalesVisibilidad=l},null,8,R),[[n.nr,a.condicionalesVisibilidad]]),(0,o._)("div",F,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.tipoVisibilidad=l},$,8,L),[[n.bM,a.tipoVisibilidad]]),(0,o._)("div",J,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.obligatorio=l},ea,8,X),[[n.bM,a.obligatorio]]),(0,o._)("div",oa,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.moneda=l},ia,8,ta),[[n.bM,a.moneda]]),(0,o._)("div",ra,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.tipoNumeracion=l},ma,8,da),[[n.bM,a.tipoNumeracion]]),(0,o._)("div",pa,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.llevaValorVehiculo=l},fa,8,_a),[[n.bM,a.llevaValorVehiculo]]),(0,o._)("div",va,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.sumaAsegurada=l},ha,8,wa),[[n.bM,a.sumaAsegurada]]),(0,o._)("div",Ta,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-small",type:"text","onUpdate:modelValue":l=>a.montoPrima=l},null,8,Va),[[n.nr,a.montoPrima]]),(0,o._)("div",Ua,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-medium",type:"text","onUpdate:modelValue":l=>a.montoDeduMin=l},null,8,ka),[[n.nr,a.montoDeduMin]]),(0,o._)("div",xa,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-small",type:"text","onUpdate:modelValue":l=>a.tasaDedu=l},null,8,Sa),[[n.nr,a.tasaDedu]]),(0,o._)("div",Da,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-medium",type:"text","onUpdate:modelValue":l=>a.montoSumaAsegurada=l},null,8,Aa),[[n.nr,a.montoSumaAsegurada]]),(0,o._)("div",Ma,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"form-select","onUpdate:modelValue":l=>a.tipo=l},Ha,8,Za),[[n.bM,a.tipo]]),(0,o._)("div",Pa,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{class:"form-control width-medium",type:"text","onUpdate:modelValue":l=>a.primaMinima=l},null,8,Ea),[[n.nr,a.primaMinima]]),(0,o._)("div",ja,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.newTarifas,(s=>((0,o.wg)(),(0,o.iD)("td",Na,[(0,o._)("div",{class:"cursor-pointer small",style:{position:"absolute",left:"0",top:"15px"},onClick:()=>{"undefined"===typeof a.rangos[s.idTarifa]&&(a.rangos[s.idTarifa]=[]),a.showDetails[s.idTarifa]=!0}},Ka,8,Ya),a.showDetails[s.idTarifa]?((0,o.wg)(),(0,o.iD)("div",{key:0,onClose:()=>{a.showDetails[s.idTarifa]=!1},class:"globalModal"},[(0,o._)("div",Ra,[(0,o._)("div",{onClick:l=>a.showDetails[s.idTarifa]=!1,class:"globalModalClose mt-3",style:{position:"absolute"}},Ba,8,Fa),(0,o._)("div",null,[Wa,Qa,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.rangos[s.idTarifa],((l,e)=>((0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",$a,[(0,o._)("h5",null,"No. "+(0,t.zw)(e+1),1),(0,o._)("div",Ja,[(0,o._)("div",Xa,[(0,o._)("div",null,[al,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.suma_asegurada_desde=a},null,8,ll),[[n.nr,l.suma_asegurada_desde]])])]),(0,o._)("div",el,[(0,o._)("div",null,[ol,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.suma_asegurada_hasta=a},null,8,tl),[[n.nr,l.suma_asegurada_hasta]])])]),(0,o._)("div",nl,[(0,o._)("div",null,[sl,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.suma_asegurada=a},null,8,il),[[n.nr,l.suma_asegurada]])])]),(0,o._)("div",rl,[(0,o._)("div",null,[dl,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.tasa=a},null,8,ul),[[n.nr,l.tasa]])])]),(0,o._)("div",cl,[(0,o._)("div",null,[ml,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.prima=a},null,8,pl),[[n.nr,l.prima]])])]),(0,o._)("div",_l,[(0,o._)("div",null,[bl,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.tasa_deducible=a},null,8,gl),[[n.nr,l.tasa_deducible]])])]),(0,o._)("div",fl,[(0,o._)("div",null,[vl,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.valor_deducible=a},null,8,wl),[[n.nr,l.valor_deducible]])])]),(0,o._)("div",Cl,[(0,o._)("div",null,[yl,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a=>l.prima_minima=a},null,8,hl),[[n.nr,l.prima_minima]])])])]),(0,o._)("div",{class:"text-end",onClick:l=>{a.rangos[s.idTarifa].splice(e,1)}}," Eliminar rango ",8,Tl)])])))),256)),(0,o._)("div",Vl,[(0,o._)("button",{onClick:l=>a.rangos[s.idTarifa].push({suma_asegurada_desde:"",suma_asegurada_hasta:"",suma_asegurada:"",tasa:"",prima:"",tasa_deducible:"",valor_deducible:"",prima_minima:""}),class:"btn btn-primary btn-sm"},"Agregar rango ",8,Ul)]),(0,o._)("div",kl,[(0,o._)("button",{onClick:l[2]||(l[2]=(...a)=>B.guardarDetalle&&B.guardarDetalle(...a)),class:"btn btn-success"},"Guardar detalle")])])])],40,qa)):(0,o.kq)("",!0),a?.det&&a.det[s.id]?((0,o.wg)(),(0,o.j4)(Q,{key:1,tags:j.newCoberturas[e]["det"][s.id]["valor"],class:"form-control p-0 width-x-large",onOnTagsChanged:a=>B.addTagTarifaCobertura(a,e,s.id),limit:"t"===a["tipo"]?1:30,"read-only":!a["tipo"]||""===a["tipo"]},null,8,["tags","onOnTagsChanged","limit","read-only"])):(0,o.kq)("",!0),(0,o._)("div",xl,(0,t.zw)(B.searchCobertura(a.idCobertura)),1)])))),256))])))),256))]),(0,o._)("tr",null,[(0,o._)("td",Sl,[(0,o._)("h6",Dl,[(0,o._)("span",{class:"cursor-pointer small",onClick:l[3]||(l[3]=(...a)=>B.newAddCobertura&&B.newAddCobertura(...a))},[Al,(0,o.Uk)(" Agregar cobertura")])])])])])]),Ml,(0,o._)("div",Zl,[(0,o._)("button",{class:"btn btn-primary me-4",onClick:l[4]||(l[4]=(...a)=>B.saveAS400&&B.saveAS400(...a))},"Enviar configuración para AS400"),(0,o._)("button",{class:"btn btn-success",onClick:l[5]||(l[5]=(...a)=>B.saveAll&&B.saveAll(...a))},"Guardar configuración")]),zl,(0,o._)("div",null,[Il,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.as400Debug,(a=>((0,o.wg)(),(0,o.iD)("div",null,[(0,o.wy)((0,o._)("textarea",{class:"w-100",rows:"10","onUpdate:modelValue":l=>a.dtainput=l},null,8,Ol),[[n.nr,a.dtainput]])])))),256)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.as400DebugLOG,(a=>((0,o.wg)(),(0,o.iD)("div",Hl,[(0,o.Uk)((0,t.zw)(a)+" ",1),Pl])))),256))]),j.loadConfigModal?((0,o.wg)(),(0,o.iD)("div",{key:0,onClose:l[7]||(l[7]=()=>{j.loadConfigModal=!1}),class:"globalModal"},[(0,o._)("div",El,[(0,o._)("div",{onClick:l[6]||(l[6]=a=>j.loadConfigModal=!1),class:"globalModalClose mt-3",style:{position:"absolute"}},Nl),(0,o._)("div",null,[Yl,Gl,(0,o._)("div",null,[(0,o._)("div",Kl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(j.productos,(a=>((0,o.wg)(),(0,o.iD)("div",ql,[(0,o._)("div",Rl,[(0,o._)("div",Fl,[(0,o._)("div",Ll,(0,t.zw)(a.nombre),1),(0,o._)("div",Bl,[(0,o._)("button",{class:"btn btn-primary btn-sm",onClick:l=>B.cloneConfig(a.id)},"Seleccionar",8,Wl)])])])])))),256))])])])])],32)):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})}var $l=e(4768),Jl=e(5536),Xl=e(7091),ae=e(3453),le=e(7758),ee=e(5107),oe=(e(4806),{name:"Tables",components:{InputGroup:ee.Z,Select:le.Z,Button:Jl.Z,Multiselect:Xl.Z,Vue3TagsInput:ae.Z},data(){return{loadFull:{},newTarifas:[],newCoberturas:[],tarifas:{},tarifaSelected:!1,tarifasOptions:[],tarifaEditing:{},coberturas:{},coberturaSelected:!1,coberturasOptions:[],coberturaEditing:{},gruposSup:[],gruposOptions:[],rolesOptions:[],usuariosOptions:[],canalesOptions:[],productoTarifas:[],productoCoberturas:[],lockSave:!1,showEditTarifa:!1,showEditCobertura:!1,as400Debug:[],as400DebugLOG:[],loadConfigModal:!1,productos:{}}},mounted(){this.productoId="undefined"!==typeof this.$route.params.id?parseInt(this.$route.params.id):0,this.load()},methods:{load(){const a=this;$l.Z.doAjax("POST","config/prod-tari-cober",{productoId:a.productoId},(function(l){a.loadFull=l.data,a.newTarifas=l.data.t,a.newCoberturas=l.data.c}),(function(a){$l.Z.alert(a.msg,"danger")}))},cloneConfig(a){const l=this;$l.Z.confirm("Se eliminará la configuración actual y será reemplazada por la nueva, ¿está seguro?",(function(){$l.Z.doAjax("POST","config/clone-prod-tari-cober",{productoId:a,productoIdNew:l.productoId},(function(a){$l.Z.alert(a.msg,"success"),l.loadConfigModal=!1,l.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))}))},newAddTarifa(){const a=this;this.saveAll((function(){$l.Z.doAjax("POST","config/add-prod-tari",{productoId:a.productoId},(function(l){a.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))}))},newDeleteTarifa(a){const l=this;this.saveAll((function(){$l.Z.doAjax("POST","config/delete-prod-tari",{productoId:l.productoId,tarifaId:a},(function(a){l.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))}))},newAddCobertura(){const a=this;this.saveAll((function(){$l.Z.doAjax("POST","config/add-prod-tari-cober",{productoId:a.productoId},(function(l){a.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))}))},openDetails(){},deleteCobertura(a){const l=this;$l.Z.confirm("¿Está seguro de eliminar?",(function(){this.saveAll((function(){$l.Z.doAjax("POST","config/delete-prod-tari-cober",{productoId:l.productoId,coberturaId:a},(function(a){$l.Z.alert(a.msg,"success"),l.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))}))}))},saveAll(a){const l=this;$l.Z.doAjax("POST","config/save-prod-tari-cober",{productoId:l.productoId,tarifas:l.newTarifas,coberturas:l.newCoberturas},(function(e){$l.Z.alert(e.msg,"success"),l.as400Debug=e.data.xmlAS.dtainput||[],"function"===typeof a?a():l.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))},saveAS400(){const a=this;$l.Z.doAjax("POST","config/save-prod-tari-cober",{productoId:a.productoId,tarifas:a.newTarifas,coberturas:a.newCoberturas,sendAS400:1},(function(l){$l.Z.alert(l.msg,"success"),a.as400Debug=l.data.xmlAS||[],a.as400DebugLOG=l.data.log||[],a.load()}),(function(a){$l.Z.alert(a.msg,"danger")}))},addTag(a,l){const e=this;e.newCoberturas[l]["rango"]=a},addTagTarifaCobertura(a,l,e){const o=this,t=o.newCoberturas[l];o.newCoberturas[l]["det"][e]["valor"]="t"===t["tipo"]?a.filter((a=>!Number.isNaN(Number(a)))):a},guardarDetalle(){this.saveAll()},searchCobertura(a){let l="";return this.loadFull.cat.cobertura.forEach((function(e,o){parseInt(e.id)===parseInt(a)&&(l=e.nombre)})),l},loadCatalogoProductos(){const a=this;$l.Z.doAjax("POST","admin/catalogo/load",{slug:"productos",opt:"get"},(function(l){a.loadConfigModal=!0,a.productos=l.data}),(function(a){$l.Z.alert(a.msg,"danger")}))}}}),te=e(89);const ne=(0,te.Z)(oe,[["render",Ql]]);var se=ne}}]);
//# sourceMappingURL=3804.6feee9dc.js.map